"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[43],{5129:(t,e,n)=>{n(4832),n(6424),n(1477),n(2480);var r=n(8706),o=n(2478),i=(n(8225),n(1168),n(422),n(4616),n(6447),n(233),n(3922),n(8747),n(8258),n(2351),n(5436),n(7564),n(9270),n(3562),n(9650),n(5821),n(3859),n(662),n(1504),n(6854),n(1559)),a="questions-over",c="question-load",u="answer-receive",s="start-click",l="restart-click";n(3538);function f(){return document.documentElement.lang}var p={};function h(t){if("en"===f()){var e=p[t];if(e)return e}return t}function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e){return w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},w(t,e)}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=E(t);if(e){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(t,e){if(e&&("object"===y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function E(t){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},E(t)}p["минут"]="minutes",p["Начать"]="Start",p["Продолжить"]="Continue",p["Продолжить тест"]="Continue test",p["Начать сначала"]="Restart",p["Произошла ошибка во время загрузки."]="An error occurred during download.",p["Произошла ошибка во время загрузки результата."]="An error occurred while loading the result.",p["Отказано в доступе."]="Access denied.",p["Задание"]="The task",p["Загрузка результата..."]="Loading result...",p["Результат обрабатывается..."]="The result is processed...",p["Ваши результаты"]="Your results",p["Постоянная ссылка на результат"]="Permanent link to the result",p["Пройти тест заново"]="Take the test again",p["Требуется оплата."]="Payment required.",p["Нажмите, чтобы перейти к оплате"]="Click to proceed to payment",p["Точно описывает меня"]="Exactly describes me",p["Частично описывает меня"]="Partially describes me",p["Нейтрально"]="Neutral",p["Закончилось время, отведённое на вопрос"]="Question time expired",p["секунд"]="seconds",p["Нажмите кнопку продолжить, когда будете готовы продолжить тест."]="Click the Continue button when you are ready to continue with the test.",p["Автор теста:"]="Test author:",p["Авторы теста:"]="Test authors:";var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(u,t);var e,n,r,i,a,c=_(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=c.call(this,t)).api=t.api,e.state={error:null,isLoading:!0,result:null},e}return e=u,n=[{key:"componentDidMount",value:(i=regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.resultKey();case 2:e=t.sent,this.api.result().then((function(t){n.setState(b(b({},n.state),{},{isLoading:!1,key:e,result:t.data}))})).catch((function(t){t.response&&console.error(t.response.data.detail),console.error(t),n.setState(b(b({},n.state),{},{isLoading:!1,error:h("Произошла ошибка во время загрузки результата.")}))}));case 4:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){v(o,n,r,a,c,"next",t)}function c(t){v(o,n,r,a,c,"throw",t)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"render",value:function(){if(this.state.isLoading)return o.createElement("div",{className:"container"},h("Загрузка результата..."));if(this.state.error)return o.createElement("div",{className:"container"},this.state.error);var t="https://testonomica.com/tests/result/"+this.state.key+"/";return o.createElement("div",{className:"tnc-result"},o.createElement("div",{className:"container"},o.createElement("h1",{className:"tnc-result__title"},this.props.test.name),o.createElement("h2",{className:"tnc-result__subtitle"},h("Ваши результаты"),":"),o.createElement("article",{className:"tnc-result__text",dangerouslySetInnerHTML:{__html:this.state.result}}),o.createElement("p",null,o.createElement("span",{style:{fontWeight:"bold"}},h("Постоянная ссылка на результат"),":"),o.createElement("br",null),o.createElement("a",{href:t},t)),o.createElement("button",{onClick:this.props.restartClickHandler,className:"tnc-btn tnc-result__btn-restart"},h("Пройти тест заново"))))}}],n&&g(e.prototype,n),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(o.Component),S=(n(510),n(7213));function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function R(t,e,n){return e&&j(t.prototype,e),n&&j(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function N(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I(t,e)}function I(t,e){return I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},I(t,e)}function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=x(t);if(e){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}function A(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var q=function(t){N(n,t);var e=C(n);function n(t){return P(this,n),e.call(this,t)}return R(n,[{key:"render",value:function(){var t;if(t=this.props.status===i.STATUS_IN_PROGRESS?o.createElement("div",{className:"tnc-welcome__btns"},o.createElement("button",{onClick:this.props.restoreClickHandler,className:"tnc-btn tnc-welcome__btn tnc-welcome__btn_restore"},h("Продолжить тест")),o.createElement("button",{onClick:this.props.restartClickHandler,className:"tnc-btn tnc-welcome__btn tnc-welcome__btn_restart"},h("Начать сначала"))):o.createElement("div",{className:"tnc-welcome__btns"},o.createElement("button",{onClick:this.props.startClickHandler,className:"tnc-btn tnc-welcome__btn tnc-welcome__btn_start"},h("Начать"))),this.props.startScreenConfig===i.START_SCREEN_LIVE){var e=this.props.content;return o.createElement("div",{className:"tnc-welcome"},(0,S.ZP)(e,{replace:function(e){if(e.attribs&&"testonomica_buttons"===e.attribs.id)return t}}))}return o.createElement("div",{className:"tnc-welcome"},o.createElement("div",{className:"container"},o.createElement("h1",{className:"tnc-welcome__title"},this.props.test.name),o.createElement("div",{className:"tnc-welcome__duration"},this.props.test.duration," ",h("минут")),o.createElement("div",{className:"tnc-welcome__description",dangerouslySetInnerHTML:{__html:this.props.test.description}}),o.createElement(H,{authors:this.props.test.authors}),t))}}]),n}(o.Component),H=function(t){N(n,t);var e=C(n);function n(t){return P(this,n),e.call(this,t)}return R(n,[{key:"render",value:function(){var t=this;return this.props.authors?0===this.props.authors.length?null:o.createElement("div",{className:"tnc-welcome__description"},this.props.authors.length>1?h("Авторы теста:"):h("Автор теста:")," ",this.props.authors.map((function(e,n){return o.createElement("span",{key:n},o.createElement("a",{href:e.url},e.name),n+1<t.props.authors.length?", ":".")}))):null}}]),n}(o.Component);n(1916);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function B(t,e){return B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},B(t,e)}function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Q(t);if(e){var o=Q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return F(this,n)}}function F(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Q(t){return Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Q(t)}var M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e)}(a,t);var e,n,r,i=U(a);function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,t)}return e=a,(n=[{key:"render",value:function(){var t=null,e=null;return this.props.enabledBack&&(t=o.createElement("button",{disabled:this.props.isLoading,onClick:this.props.goBackHandler,className:"tnc-btn tnc-q-nav__btn tnc-q-nav__btn_back"},"←")),this.props.enabledForward&&(e=o.createElement("button",{disabled:this.props.isLoading,onClick:this.props.goForwardHandler,className:"tnc-btn tnc-q-nav__btn tnc-q-nav__btn_forward"},"→")),o.createElement("div",{className:"tnc-q-form__nav tnc-q-nav"},t," ",e)}}])&&D(e.prototype,n),r&&D(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function K(t,e){return K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},K(t,e)}function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=X(t);if(e){var o=X(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(t,e){if(e&&("object"===z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return V(t)}function V(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X(t){return X=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},X(t)}var J=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K(t,e)}(a,t);var e,n,r,i=G(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).options=e.options.bind(V(e)),e}return e=a,(n=[{key:"options",value:function(){var t=this;return this.props.options.map((function(e,n){return o.createElement("div",{key:n,className:"tnc-q-form__option-wrapper"},e.img?o.createElement("img",{src:e.img,onClick:t.props.isLoading?null:function(){return t.props.selectionHandler(e.value)},className:"tnc-q-form__option-img",alt:"Task"}):o.createElement("button",{disabled:t.props.isLoading,onClick:function(){return t.props.selectionHandler(e.value)},className:"tnc-btn tnc-q-form__option-btn"},e.text))}))}},{key:"render",value:function(){return o.createElement("div",{className:"tnc-q__form tnc-q-form"},o.createElement("div",{className:"tnc-q-form__options"},this.options()),o.createElement(M,{isLoading:this.props.isLoading,enabledBack:this.props.enabledBack,enabledForward:this.props.enabledForward,goForwardHandler:this.props.goForwardHandler,goBackHandler:this.props.goBackHandler}))}}])&&Y(e.prototype,n),r&&Y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);n(3822),n(1566),n(1731),n(9987);function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){et(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function et(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rt(t,e){return rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},rt(t,e)}function ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ct(t);if(e){var o=ct(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return it(this,n)}}function it(t,e){if(e&&("object"===W(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return at(t)}function at(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ct(t){return ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ct(t)}var ut=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rt(t,e)}(a,t);var e,n,r,i=ot(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).state={options:t.options,values:[],enabledForward:!1},e.options=e.options.bind(at(e)),e.clickHandler=e.clickHandler.bind(at(e)),e.goForwardHandler=e.goForwardHandler.bind(at(e)),e}return e=a,(n=[{key:"clickHandler",value:function(t){var e=this.state.values,n=e.indexOf(t);n>-1?e.splice(n,1):e.push(t);var r=e.length===parseInt(this.props.count);this.setState(tt(tt({},this.state),{},{values:e,enabledForward:r}))}},{key:"goForwardHandler",value:function(){this.props.goForwardHandler(this.state.values)}},{key:"options",value:function(){var t=this;return this.state.options.map((function(e,n){return o.createElement("div",{key:n,className:"tnc-q-form__option-wrapper"},e.img?o.createElement("img",{src:e.img,style:{maxHeight:"100px"},onClick:function(){return t.clickHandler(e.value,n)},className:"tnc-q-form__option-img "+(t.state.values.includes(e.value)?"tnc-q-form__option-img_selected":""),alt:"Task"}):o.createElement("button",{disabled:t.props.isLoading,onClick:function(){return t.clickHandler(e.value,n)},className:"tnc-btn tnc-q-form__option-btn "+(t.state.values.includes(e.value)?"tnc-q-form__option-btn_selected":"")},e.text))}))}},{key:"render",value:function(){return o.createElement("div",{className:"tnc-q__form tnc-q-form"},o.createElement("div",{className:"tnc-q-form__options"},this.options()),o.createElement(M,{isLoading:this.props.isLoading,enabledBack:this.props.enabledBack,enabledForward:this.state.enabledForward,goForwardHandler:this.goForwardHandler,goBackHandler:this.props.goBackHandler}))}}])&&nt(e.prototype,n),r&&nt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);function st(t){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},st(t)}function lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ft(t,e){return ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ft(t,e)}function pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=dt(t);if(e){var o=dt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ht(this,n)}}function ht(t,e){if(e&&("object"===st(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return yt(t)}function yt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dt(t){return dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},dt(t)}var bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ft(t,e)}(a,t);var e,n,r,i=pt(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).state={values:[]},e.options=e.options.bind(yt(e)),e.onChange=e.onChange.bind(yt(e)),e}return e=a,(n=[{key:"onChange",value:function(t,e){var n=this.state.values;n[e]=t,this.setState({values:n})}},{key:"options",value:function(){var t=this;return this.props.options.map((function(e,n){var r;return o.createElement("div",{key:n,className:"tnc-q-form__option-wrapper"},o.createElement("input",{disabled:t.props.isLoading,onChange:function(e){return t.onChange(e.target.value,n)},placeholder:e.text,value:null!==(r=t.state.values[n])&&void 0!==r?r:"",className:"tnc-q-form__option-text"}))}))}},{key:"render",value:function(){var t=this;return o.createElement("div",{className:"tnc-q__form tnc-q-form"},o.createElement("div",{className:"tnc-q-form__options"},this.options()),o.createElement(M,{isLoading:this.props.isLoading,enabledBack:this.props.enabledBack,enabledForward:!0,goForwardHandler:function(){return t.props.selectionHandler(t.state.values)},goBackHandler:this.props.goBackHandler}))}}])&&lt(e.prototype,n),r&&lt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);function mt(t){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt(t)}function vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gt(t,e){return gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},gt(t,e)}function wt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Et(t);if(e){var o=Et(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _t(this,n)}}function _t(t,e){if(e&&("object"===mt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ot(t)}function Ot(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Et(t){return Et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Et(t)}var kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gt(t,e)}(a,t);var e,n,r,i=wt(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).state={options:e.props.options,values:[]},e.options=e.options.bind(Ot(e)),e}return e=a,(n=[{key:"clickHandler",value:function(t,e){var n=this.state.values;n.push(t);var r=this.state.options;r.splice(e,1),this.setState({values:n,options:r}),0===r.length&&this.props.selectionHandler(n)}},{key:"options",value:function(){var t=this;return this.state.options.map((function(e,n){return o.createElement("div",{key:n,className:"tnc-q-form__option-wrapper"},o.createElement("button",{disabled:t.props.isLoading,onClick:function(){return t.clickHandler(e.value,n)},className:"tnc-btn tnc-q-form__option-btn"},e.text))}))}},{key:"render",value:function(){return o.createElement("div",{className:"tnc-q__form tnc-q-form"},o.createElement("div",{className:"tnc-q-form__options"},this.options()),o.createElement(M,{isLoading:this.props.isLoading,enabledBack:this.props.enabledBack,enabledForward:this.props.enabledForward,goForwardHandler:this.props.goForwardHandler,goBackHandler:this.props.goBackHandler}))}}])&&vt(e.prototype,n),r&&vt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pt(t,e){return Pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Pt(t,e)}function jt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=It(t);if(e){var o=It(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rt(this,n)}}function Rt(t,e){if(e&&("object"===St(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Nt(t)}function Nt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function It(t){return It=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},It(t)}var Ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pt(t,e)}(a,t);var e,n,r,i=jt(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).options=e.options.bind(Nt(e)),e}return e=a,(n=[{key:"name",value:function(t){return h(1===t||3===t?"Частично описывает меня":"Нейтрально")}},{key:"options",value:function(){var t=this;return this.props.options.map((function(e,n){return o.createElement("div",{key:n,className:"tnc-q-form__option-wrapper",onClick:function(){return t.props.selectionHandler(e.value)}},o.createElement("button",{disabled:t.props.isLoading,className:"tnc-btn tnc-q-form__option-btn"}),o.createElement("span",{className:"tnc-q-form__option-name"},0===n||4===n?e.text:t.name(n)))}))}},{key:"render",value:function(){return o.createElement("div",{className:"tnc-q__form tnc-q-form tnc-form-gradient"},o.createElement("div",{className:"tnc-form-gradient__compared"},o.createElement("div",{className:"tnc-form-gradient__compared-item"},this.props.options[0].text),o.createElement("div",{className:"tnc-form-gradient__compared-item"},this.props.options[this.props.options.length-1].text)),o.createElement("div",{className:"tnc-q-form__options"},this.options()),o.createElement("div",{className:"tnc-form-gradient__values"},o.createElement("div",{className:"tnc-form-gradient__values-item"},h("Точно описывает меня")),o.createElement("div",{className:"tnc-form-gradient__values-item"},h("Нейтрально")),o.createElement("div",{className:"tnc-form-gradient__values-item"},h("Точно описывает меня"))),o.createElement(M,{isLoading:this.props.isLoading,enabledBack:this.props.enabledBack,enabledForward:this.props.enabledForward,goForwardHandler:this.props.goForwardHandler,goBackHandler:this.props.goBackHandler}))}}])&&Tt(e.prototype,n),r&&Tt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);function At(t){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(t)}function xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qt(t,e){return qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},qt(t,e)}function Ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Dt(t);if(e){var o=Dt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lt(this,n)}}function Lt(t,e){if(e&&("object"===At(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Dt(t){return Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Dt(t)}var Bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qt(t,e)}(a,t);var e,n,r,i=Ht(a);function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,t)}return e=a,(n=[{key:"render",value:function(){var t=100*(this.props.number-1)/this.props.length;return o.createElement("div",{className:"tnc-q__progress-bar tnc-q-progress-bar"},o.createElement("div",{className:"tnc-q-progress-bar__counters"},o.createElement("span",null,this.props.number),"/",o.createElement("span",null,this.props.length)),o.createElement("div",{className:"tnc-q-progress-bar__line-wrapper"},o.createElement("div",{className:"tnc-q-progress-bar__line",role:"progressbar",style:{width:t+"%"},"aria-valuenow":t,"aria-valuemin":t,"aria-valuemax":"100"})))}}])&&xt(e.prototype,n),r&&xt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);function Ut(t){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ut(t)}function Ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Qt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ft(Object(n),!0).forEach((function(e){Mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Mt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yt(t,e){return Yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Yt(t,e)}function Kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Vt(t);if(e){var o=Vt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Gt(this,n)}}function Gt(t,e){if(e&&("object"===Ut(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Zt(t)}function Zt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vt(t){return Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Vt(t)}var Xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yt(t,e)}(a,t);var e,n,r,i=Kt(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).interval=null,e.state={timer:t.timer>0?t.timer:null,timeOut:!1},e.timeOut=e.timeOut.bind(Zt(e)),e}return e=a,(n=[{key:"componentDidMount",value:function(){if(this.state.timer){console.log("timer",this.state.timer);var t=this;this.interval=setInterval((function(){t.state.timer>1?t.setState(Qt(Qt({},t.state),{},{timer:t.state.timer-1})):(clearInterval(t.interval),t.timeOut())}),1e3)}}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"timeOut",value:function(){console.log("timeout"),this.setState(Qt(Qt({},this.state),{},{timeOut:!0}))}},{key:"render",value:function(){return this.state.timeOut?o.createElement("div",null,o.createElement("p",null,h("Закончилось время, отведённое на вопрос")," (",this.props.timer," ",h("секунд"),").",h("Нажмите кнопку продолжить, когда будете готовы продолжить тест.")),o.createElement("button",{onClick:this.props.goForwardHandler,className:"btn btn-primary"},h("Продолжить"))):this.props.children}}])&&zt(e.prototype,n),r&&zt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);function Jt(t){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jt(t)}function Wt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function $t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$t(Object(n),!0).forEach((function(e){ee(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ee(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function re(t,e){return re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},re(t,e)}function oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ce(t);if(e){var o=ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ie(this,n)}}function ie(t,e){if(e&&("object"===Jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ae(t)}function ae(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ce(t){return ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ce(t)}var ue=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&re(t,e)}(p,t);var e,n,r,s,l,f=oe(p);function p(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(e=f.call(this,t)).qm=t.qm,e.am=t.am,e.state={active:!1,isLoading:!0,error:null,question:null,opacity:0};var n={};return n[i.QUESTION_TYPE_OPTION]=J,n[i.QUESTION_TYPE_CHECKBOX]=ut,n[i.QUESTION_TYPE_TEXT]=bt,n[i.QUESTION_TYPE_RATING]=kt,n[i.QUESTION_TYPE_GRADIENT]=Ct,e.formTypeMap=n,e.save=e.save.bind(ae(e)),e.goForwardHandler=e.goForwardHandler.bind(ae(e)),e.goBackHandler=e.goBackHandler.bind(ae(e)),e.trigger=e.trigger.bind(ae(e)),e.animateInterval=null,e}return e=p,n=[{key:"componentDidMount",value:function(){this.props.task===i.RESTORE_QUIZ_COMMAND?this.next():this.start()}},{key:"trigger",value:function(t){this.props.dispatcher.dispatchEvent(t)}},{key:"start",value:function(){var t=this;this.setState(te(te({},this.state),{},{isLoading:!0})),this.am.clear(),this.qm.first().then((function(e){t.afterQuestionLoad(e)}))}},{key:"next",value:function(){var t=this;this.setState(te(te({},this.state),{},{isLoading:!0})),this.am.last().then((function(e){t.qm.next(e.questionId).then((function(e){t.afterQuestionLoad(e)}))}))}},{key:"prev",value:function(){var t=this;this.setState(te(te({},this.state),{},{isLoading:!0})),this.qm.prev(this.state.question.id).then((function(e){t.afterQuestionLoad(e)}))}},{key:"afterQuestionLoad",value:function(t){this.setState(te(te({},this.state),{},{isLoading:!1,question:t,opacity:0,active:!1})),this.trigger(new CustomEvent(c,{detail:{number:t.number,target:this}}))}},{key:"goForwardHandler",value:function(){return this.save(null)}},{key:"goBackHandler",value:function(){this.prev()}},{key:"fadeIn",value:function(){this.animateInterval&&clearInterval(this.animateInterval);var t=this;this.animateInterval=setInterval((function(){t.state.opacity>=1&&clearInterval(t.animateInterval),t.setState(te(te({},t.state),{},{opacity:t.state.opacity+.05}))}),10)}},{key:"save",value:(s=regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.am.add(this.state.question.id,e),this.trigger(new CustomEvent(u,{detail:{target:this,number:this.state.question.number}}));case 2:case"end":return t.stop()}}),t,this)})),l=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=s.apply(t,e);function i(t){Wt(o,n,r,i,a,"next",t)}function a(t){Wt(o,n,r,i,a,"throw",t)}i(void 0)}))},function(t){return l.apply(this,arguments)})},{key:"continueQuiz",value:function(){this.state.question.number>=this.props.quizLength?this.trigger(new CustomEvent(a,{detail:{number:this.state.question.number}})):this.next()}},{key:"renderQuiz",value:function(){this.setState(te(te({},this.state),{},{active:!0})),this.fadeIn()}},{key:"render",value:function(){if(!this.state.active)return null;if(this.state.error)return this.state.error;if(null===this.state.question)return null;var t=this.state.question,e=t.options,n=t.type.get(),r=t.enabledForward&&t.number<t.length,i=t.enabledBack&&t.number>1,a=this.formTypeMap[n];return o.createElement("section",{className:"tnc-q-wrapper"},o.createElement("article",{className:"tnc-q tnc-q__"+this.props.testId+"-"+t.id},o.createElement("div",{className:"container"},o.createElement("div",{className:"tnc-q-inner",style:{opacity:this.state.opacity}},o.createElement(Xt,{timer:t.timer,goForwardHandler:this.goForwardHandler,key:t.id},t.img?o.createElement("img",{className:"tnc-q__img",src:t.img,alt:h("Задание")}):null,o.createElement("h2",{className:"tnc-q__name"},t.name),t.text?o.createElement("div",{className:"tnc-q__text",dangerouslySetInnerHTML:{__html:t.text}}):null,o.createElement(a,{key:t.id,options:e,count:t.count,isLoading:this.state.isLoading,enabledBack:i,enabledForward:r,selectionHandler:this.save,goForwardHandler:this.goForwardHandler,goBackHandler:this.goBackHandler}),o.createElement(Bt,{length:t.length,number:t.number}))))))}}],n&&ne(e.prototype,n),r&&ne(e,r),Object.defineProperty(e,"prototype",{writable:!1}),p}(o.Component);function se(t){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},se(t)}function le(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function fe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fe(Object(n),!0).forEach((function(e){he(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function he(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function de(t,e){return de=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},de(t,e)}function be(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ge(t);if(e){var o=ge(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return me(this,n)}}function me(t,e){if(e&&("object"===se(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ve(t)}function ve(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ge(t){return ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ge(t)}var we="welcome",_e="quiz",Oe="result",Ee=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&de(t,e)}(c,t);var e,n,r,a=be(c);function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this,t)).config=t.config,e.content=t.content,e.state={status:null,screen:null,quizTask:null},e.dispatcher=t.dispatcher,e.startClickHandler=e.startClickHandler.bind(ve(e)),e.restartClickHandler=e.restartClickHandler.bind(ve(e)),e.restoreClickHandler=e.restoreClickHandler.bind(ve(e)),e}return e=c,n=[{key:"trigger",value:function(t){this.dispatcher&&this.dispatcher.dispatchEvent(t)}},{key:"startClickHandler",value:function(){this.trigger(new CustomEvent(s))}},{key:"restartClickHandler",value:function(){this.trigger(new CustomEvent(l))}},{key:"restoreClickHandler",value:function(){this.setState(pe(pe({},this.state),{},{screen:_e,quizTask:i.RESTORE_QUIZ_COMMAND}))}},{key:"start",value:function(){this.setState(pe(pe({},this.state),{},{screen:_e,quizTask:i.START_QUIZ_COMMAND}))}},{key:"componentDidMount",value:function(){var t=this;this.trigger(new CustomEvent("loaded")),this.props.am.status().then(function(){var e,n=(e=regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.config.startScreen===i.START_SCREEN_RESTORE?t.setState(pe(pe({},t.state),{},{screen:_e,quizTask:i.RESTORE_QUIZ_COMMAND})):t.config.startScreen===i.START_SCREEN_START?t.setState(pe(pe({},t.state),{},{screen:_e,quizTask:i.START_QUIZ_COMMAND})):n===i.STATUS_FINISHED&&t.config.isShowResultAfterLoad()?t.setState(pe(pe({},t.state),{},{status:n,screen:Oe})):t.setState(pe(pe({},t.state),{},{status:n,screen:we}));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(t){le(i,r,o,a,c,"next",t)}function c(t){le(i,r,o,a,c,"throw",t)}a(void 0)}))});return function(t){return n.apply(this,arguments)}}())}},{key:"render",value:function(){var t=this;return o.createElement("div",{id:"tnc",className:"tnc"},this.state.screen===we&&o.createElement(q,{test:this.props.test,status:this.state.status,startScreenConfig:this.config.getStartScreen(),content:this.content,startClickHandler:this.startClickHandler,restartClickHandler:this.restartClickHandler,restoreClickHandler:this.restoreClickHandler}),this.state.screen===_e&&(this.quiz=o.createElement(ue,{testId:this.props.test.id,quizLength:this.props.test.length,qm:this.props.qm,am:this.props.am,dispatcher:this.dispatcher,task:this.state.quizTask})),this.state.screen===Oe&&(t.config.isDisplayReport()?o.createElement(k,{api:t.api,test:t.props.test,restartClickHandler:t.restartClickHandler}):o.createElement("div",{className:"container"},o.createElement("i",null,h("Результат обрабатывается...")))))}}],n&&ye(e.prototype,n),r&&ye(e,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(o.Component),ke=(n(3195),n(4773)),Se=n.n(ke);n(9108);function Te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pe(t,e,n){return e&&Te(t.prototype,e),n&&Te(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var je=Pe((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.id,this.name=e.name,this.text=e.text,this.img=e.img,this.type=e.type,this.count=e.count,this.timer=e.timer,this.enabledBack=e.enabledBack,this.enabledForward=e.enabledForward,this.number=e.number,this.length=e.length,this.options=e.options}));function Re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ne(t,e,n){return e&&Re(t.prototype,e),n&&Re(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Ie=Ne((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=e.value,this.text=e.text,this.img=e.img}));function Ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ae=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),![i.QUESTION_TYPE_OPTION,i.QUESTION_TYPE_CHECKBOX,i.QUESTION_TYPE_TEXT,i.QUESTION_TYPE_RATING,i.QUESTION_TYPE_GRADIENT].includes(e)){var n="Unknown question type: "+e;throw console.error(n),new Error(n)}this.value=e}var e,n,r;return e=t,(n=[{key:"get",value:function(){return this.value}}])&&Ce(e.prototype,n),r&&Ce(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var qe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"hydrate",value:function(t){var e=new Ae(t.data.question.type);Object.freeze(e);var n=t.data.question.items.map((function(t){return new Ie({value:t.value,text:t.text,img:t.img})})),r=new je({id:t.data.question.id,name:t.data.question.name,text:t.data.question.text,img:t.data.question.img,enabledBack:t.data.question.enabledBack,enabledForward:t.data.question.enabledForward,count:parseInt(t.data.question.count),timer:parseInt(t.data.question.timer),number:t.data.number,length:t.data.length,type:e,options:n});return Object.freeze(r),r}}])&&xe(e.prototype,n),r&&xe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function He(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Le=function(){function t(e,n,r,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.description=n,this.price=r,this.count=o,this.sum=i}var e,n,r;return e=t,r=[{key:"createImmutable",value:function(e,n,r,o,i){var a=new t(e,n,r,o,i);return Object.freeze(this),a}}],(n=null)&&He(e.prototype,n),r&&He(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function De(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Be(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){De(i,r,o,a,c,"next",t)}function c(t){De(i,r,o,a,c,"throw",t)}a(void 0)}))}}function Ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Fe=function(){function t(e,n,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new Error("testId must be defined.");this.testId=e,this.host=(null!=n?n:i.HOST)+("en"===f()?"/en":""),this.token=r,this.test=null}var e,n,r,o,a,c;return e=t,n=[{key:"hasAccess",value:function(){var t={method:"get",url:this.host+"/access/has/",responseType:"json"};return this.token&&(t.headers={token:this.token}),Se()(t).then((function(t){return t.data.status}))}},{key:"grand",value:function(){var t=this;return Se()(this.tokenizedRequest({method:"get",url:this.host+"/access/grand/",responseType:"json"})).then((function(e){return t.token=e.data.token,!0}))}},{key:"getOrder",value:function(){return Se()(this.tokenizedRequest({method:"get",url:this.host+"/access/order/",responseType:"json"})).then((function(t){var e=t.data.order;return new Le(e.id,e.description,e.price,e.count,e.sum)}))}},{key:"description",value:function(){var t=this;return Se()({method:"get",url:this.buildUrl("/info/".concat(this.testId,"/")),responseType:"json"}).then((function(e){return t.test={id:t.testId,name:e.data.name,description:e.data.description,authors:e.data.authors,duration:e.data.duration,length:e.data.length,paid:e.data.paid},t.test}))}},{key:"firstQuestion",value:(c=Be(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Se()(this.tokenizedRequest({method:"get",url:this.buildUrl("/first/"+this.testId+"/"),responseType:"json"})).then((function(t){return e.token=t.headers["x-token"],(new qe).hydrate(t)})));case 1:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"nextQuestion",value:(a=Be(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Se()(this.tokenizedRequest({method:"get",url:this.buildUrl("/next/"+this.testId+"/?q="+e),responseType:"json"})).then((function(t){return n.token=t.headers["x-token"],(new qe).hydrate(t)})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"prevQuestion",value:(o=Be(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Se()(this.tokenizedRequest({method:"get",url:this.buildUrl("/prev/"+this.testId+"/?q="+e),responseType:"json"})).then((function(t){return n.token=t.headers["x-token"],(new qe).hydrate(t)})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"buildUrl",value:function(t){return"".concat(this.host,"/tests/api/v1").concat(t)}},{key:"tokenizedRequest",value:function(t){return this.token&&(t.headers={token:this.token}),t}}],n&&Ue(e.prototype,n),r&&Ue(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();n(7073);function Qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Me=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listeners={}}var e,n,r;return e=t,(n=[{key:"addEventListener",value:function(t,e){this.listeners[t]&&Array.isArray(this.listeners[t])||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"clearEventListeners",value:function(t){delete this.listeners[t]}},{key:"dispatchEvent",value:function(t){if(this.listeners[t.type])for(var e in this.listeners[t.type])this.listeners[t.type][e](t.detail)}}])&&Qe(e.prototype,n),r&&Qe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ye=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.testId=t.confTestId(e),this.host=t.confHost(e),this.token=t.confToken(e),this.init=t.confInit(e),this.startScreen=t.confStartScreen(e),this.displayReport=t.confDisplayReport(e),this.showResultAfterLoad=t.confShowResultAfterLoad(e)}var e,n,r;return e=t,r=[{key:"confTestId",value:function(e){return t.textValue("testId",e.testId)}},{key:"confHost",value:function(e){return t.textValue("host",e.host)}},{key:"confToken",value:function(t){return t.token}},{key:"confInit",value:function(e){return t.textValue("init",e.init,[i.INIT_AUTO,i.INIT_MANUAL])}},{key:"confStartScreen",value:function(e){return t.textValue("startScreen",e.startScreen,[i.START_SCREEN_API,i.START_SCREEN_LIVE,i.START_SCREEN_START,i.START_SCREEN_RESTORE],i.START_SCREEN_API)}},{key:"confDisplayReport",value:function(e){return!e.hasOwnProperty("displayReport")||t.isTrue(e.displayReport)}},{key:"confShowResultAfterLoad",value:function(e){return!e.hasOwnProperty("showResultAfterLoad")||t.isTrue(e.showResultAfterLoad)}},{key:"isTrue",value:function(t){return!0===t||"true"===t||"1"===t||1===t}},{key:"textValue",value:function(t,e,n,r){if(!e){if(r)return r;throw new Error("InvalidArgumentException: missing config property ".concat(t,"."))}if(n){if(n.includes(e))return e;throw new Error("InvalidArgumentException: config param ".concat(t,' contains unsupported value "').concat(e,'".'))}return e}}],(n=[{key:"getTestId",value:function(){return this.testId}},{key:"getHost",value:function(){return this.host}},{key:"getInit",value:function(){return this.init}},{key:"getToken",value:function(){return this.token}},{key:"isDisplayReport",value:function(){return this.displayReport}},{key:"isShowResultAfterLoad",value:function(){return this.showResultAfterLoad}},{key:"getStartScreen",value:function(){return this.startScreen}}])&&ze(e.prototype,n),r&&ze(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ke(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Ge(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Ke(i,r,o,a,c,"next",t)}function c(t){Ke(i,r,o,a,c,"throw",t)}a(void 0)}))}}function Ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ve=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.api=e}var e,n,r,o,i,a;return e=t,n=[{key:"first",value:(a=Ge(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.api.firstQuestion().then((function(t){return t})));case 1:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"next",value:(i=Ge(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.api.nextQuestion(e).then((function(t){return t})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"prev",value:(o=Ge(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.api.prevQuestion(e).then((function(t){return t})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})}],n&&Ze(e.prototype,n),r&&Ze(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Xe=n(2863);function Je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var We=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storage=e}var e,n,r;return e=t,(n=[{key:"add",value:function(t,e){this.storage.addAnswer(Xe.default.createImmutable(t,e))}},{key:"last",value:function(){return this.storage.getLastAnswer()}},{key:"getAll",value:function(){return this.storage.getAnswers()}},{key:"clear",value:function(){this.storage.clear()}},{key:"status",value:function(){return this.storage.getStatus()}}])&&Je(e.prototype,n),r&&Je(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var tn=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.api=new Fe(n,r,o),this.am=new We(e),this.qm=new Ve(this.api),this.dispatcher=new Me,this.setDefaultBehaviour()}var e,n,i;return e=t,n=[{key:"createApp",value:function(t,e){var n=this;this.api.description().then((function(i){var a=o.createElement(Ee,{test:i,qm:n.qm,am:n.am,config:e,content:t.innerHTML,dispatcher:n.dispatcher});n.app=r.render(a,t)}))}},{key:"setDefaultBehaviour",value:function(){var t=this;this.dispatcher.addEventListener(a,(function(){})),this.dispatcher.addEventListener(u,(function(t){t.target.continueQuiz()})),this.dispatcher.addEventListener(c,(function(t){t.target.renderQuiz()})),this.dispatcher.addEventListener(s,(function(e){t.start()})),this.dispatcher.addEventListener(l,(function(e){t.start()}))}},{key:"start",value:function(){this.app.start()}},{key:"status",value:function(){return this.am.status()}},{key:"addEventListener",value:function(t,e){this.dispatcher.addEventListener(t,e)}},{key:"clearEventListeners",value:function(t){this.dispatcher.clearEventListeners(t)}}],n&&$e(e.prototype,n),i&&$e(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var en=n(6024),nn=n.n(en),rn=n(263),on=n(5217);function an(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function cn(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){an(i,r,o,a,c,"next",t)}function c(t){an(i,r,o,a,c,"throw",t)}a(void 0)}))}}function un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(0,rn.ZF)({apiKey:"AIzaSyAxhWpbBwpTvc2V6LzaUJA1P_TOen32Eck",authDomain:"testonomica.firebaseapp.com",projectId:"testonomica",storageBucket:"testonomica.appspot.com",messagingSenderId:"284531372526",appId:"1:284531372526:web:034f85dfbf4449db4edeff",measurementId:"G-6MZ0WZNF88"});var sn=(0,on.ad)(),ln=null,fn=null,pn=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.answersRef=(0,on.JU)(sn,"users/sid_".concat(n,"/test_").concat(e),"answers"),this.statusRef=(0,on.JU)(sn,"users/sid_".concat(n,"/test_").concat(e),"state")}var e,n,r,o,a,c,u,s;return e=t,n=[{key:"resultKey",value:(s=cn(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!fn){t.next=3;break}return console.log("resultKey: from cache"),t.abrupt("return",fn);case 3:return t.next=5,(0,on.QT)(this.statusRef);case 5:if(!(e=t.sent).exists()||!e.data().resultKey){t.next=9;break}return fn=e.data().resultKey,t.abrupt("return",fn);case 9:return t.abrupt("return",null);case 10:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"clear",value:function(){var t=this;return console.log("clear"),(0,on.pl)(this.answersRef,{}).then((function(){return(0,on.pl)(t.statusRef,{})}))}},{key:"addAnswer",value:function(t){var e={};return e[t.questionId]=t.value,(0,on.r7)(this.answersRef,e).then((function(){ln=null}))}},{key:"getAnswers",value:(u=cn(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!ln){t.next=3;break}return console.log("answers: from cache"),t.abrupt("return",ln);case 3:return t.next=5,(0,on.QT)(this.answersRef);case 5:if(!(e=t.sent).exists()){t.next=11;break}return ln=e.data(),t.abrupt("return",ln);case 11:return t.abrupt("return",{});case 12:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"getLastAnswer",value:(c=cn(regeneratorRuntime.mark((function t(){var e,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAnswers();case 2:return e=t.sent,n=Object.keys(e),r=n[n.length-1],o=e[r],t.abrupt("return",Xe.default.createImmutable(r,o));case 7:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"getLength",value:(a=cn(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAnswers();case 2:return e=t.sent,t.abrupt("return",Object.keys(e).length);case 4:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"getStatus",value:(o=cn(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.resultKey();case 2:if(!t.sent){t.next=5;break}return t.abrupt("return",i.STATUS_FINISHED);case 5:return t.next=7,this.getLength();case 7:if(!(t.sent>0)){t.next=12;break}return t.abrupt("return",i.STATUS_IN_PROGRESS);case 12:return t.abrupt("return",i.STATUS_NONE);case 13:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"setFinished",value:function(t){return(0,on.r7)(this.statusRef,{resultKey:t})}}],n&&un(e.prototype,n),r&&un(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),hn=(n(1539),n(8674),n(2222),n(9755)),yn=n.n(hn);function dn(t){return{saveProgress:function(e){return new Promise((function(n){yn().post({url:"/tests/api/v1/save/".concat(t,"/"),data:{testId:t,progress:e}}).then((function(t){n(t.key)})).fail((function(){alert("Не удалось сохранить прогресс.")}))}))},getResultByKey:function(e){return new Promise((function(n){yn().get({url:"/tests/api/v1/result/".concat(t,"/?key=").concat(e)}).then((function(t){n(t)})).fail((function(){n(null)}))}))}}}function bn(){return document.documentElement.lang}var mn,vn=document.getElementById("testonomica_app"),gn=function(t){var e,n,r,o,a,c,u=t.getAttribute("data-test");if(!u)throw new Error("tag must include attribute: data-test");return new Ye({testId:u,host:null!==(e=t.getAttribute("data-host"))&&void 0!==e?e:i.HOST,token:null!==(n=t.getAttribute("data-token"))&&void 0!==n?n:null,init:null!==(r=t.getAttribute("data-init"))&&void 0!==r?r:i.INIT_AUTO,startScreen:null!==(o=t.getAttribute("data-start-screen"))&&void 0!==o?o:i.START_SCREEN_API,displayReport:null===(a=t.getAttribute("data-display-report"))||void 0===a||a,showResultAfterLoad:null===(c=t.getAttribute("data-show-result-after-load"))||void 0===c||c})}(vn),wn=null;if((mn=navigator.cookieEnabled)||(document.cookie="testcookie",mn=-1!==document.cookie.indexOf("testcookie")),mn)wn=new(nn())(gn.getTestId());else{var _n=vn.getAttribute("data-sid");if(!_n)throw Error("Error: sid has to be specified.");wn=new pn(gn.getTestId(),_n)}window.testonomica=new tn(wn,gn.getTestId(),gn.getHost(),gn.getToken()),window.testonomica.addEventListener(a,(function(){var t=new dn(gn.getTestId());wn.getAnswers().then((function(e){return t.saveProgress(e)})).then((function(t){var e;wn.clear(),window.location.href=(e="/tests/result/".concat(t,"/"),"en"===bn()?("/"===e.charAt(0)&&(e=e.substring(1)),"/en/"+e):e)}))})),gn.getInit()===i.INIT_AUTO&&window.testonomica.createApp(vn,gn)},1559:(t,e,n)=>{n(2480),Object.defineProperty(e,"__esModule",{value:!0}),e.HOST=e.QUESTION_TYPE_GRADIENT=e.QUESTION_TYPE_RATING=e.QUESTION_TYPE_TEXT=e.QUESTION_TYPE_CHECKBOX=e.QUESTION_TYPE_OPTION=e.RESTORE_QUIZ_COMMAND=e.START_QUIZ_COMMAND=e.STATUS_FINISHED=e.STATUS_IN_PROGRESS=e.STATUS_NONE=e.START_SCREEN_RESTORE=e.START_SCREEN_START=e.START_SCREEN_LIVE=e.START_SCREEN_API=e.INIT_MANUAL=e.INIT_AUTO=void 0,e.INIT_AUTO="auto",e.INIT_MANUAL="manual",e.START_SCREEN_API="api",e.START_SCREEN_LIVE="live",e.START_SCREEN_START="start",e.START_SCREEN_RESTORE="restore",e.STATUS_NONE=0,e.STATUS_IN_PROGRESS=1,e.STATUS_FINISHED=2,e.START_QUIZ_COMMAND="start",e.RESTORE_QUIZ_COMMAND="restore",e.QUESTION_TYPE_OPTION="option",e.QUESTION_TYPE_CHECKBOX="checkbox",e.QUESTION_TYPE_TEXT="text",e.QUESTION_TYPE_RATING="rating",e.QUESTION_TYPE_GRADIENT="gradient",e.HOST="https://testonomica.com"},6024:function(t,e,n){n(233),n(5821),n(4832),n(6424),n(3859),n(662),n(1504),n(6854),n(2480),n(7073),n(1945),n(9973),n(8258);var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(1559),c=i(n(2863)),u=function(){function t(t){this.storageName="testonomica_test_"+t,window.localStorage.getItem(this.storageName)?Array.isArray(this._getStorageData().answers)||(console.log("Формат хранилища изменился в новой версии, поэтому прогресс был обнулён."),this._initLocalStorage()):this._initLocalStorage()}return t.prototype.resultKey=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,this._getStorageData().resultKey]}))}))},t.prototype.clear=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return this._initLocalStorage(),[2]}))}))},t.prototype.import=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){return this._updateField("answers",Array.from(t.get().entries())),[2]}))}))},t.prototype.addAnswer=function(t){return r(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){return e=this._getStorageData(),(n=new Map(e.answers)).set(t.questionId,t.value),this._updateField("answers",Array.from(n.entries())),[2]}))}))},t.prototype.getAnswers=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,this._getStorageData().answers]}))}))},t.prototype.getLastAnswer=function(){return r(this,void 0,void 0,(function(){var t,e,n;return o(this,(function(r){return t=this._getStorageData(),e=new Map(t.answers),(n=Array.from(e.entries()).pop())?[2,c.default.createImmutable(n[0],n[1])]:[2,null]}))}))},t.prototype.getLength=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,Object.keys(this._getStorageData().answers).length]}))}))},t.prototype.getStatus=function(){return r(this,void 0,void 0,(function(){var t;return o(this,(function(e){return(t=this._getStorageData()).resultKey?[2,a.STATUS_FINISHED]:Object.keys(t.answers).length>0?[2,a.STATUS_IN_PROGRESS]:[2,a.STATUS_NONE]}))}))},t.prototype.setFinished=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){return this._updateField("resultKey",t),[2]}))}))},t.prototype._getStorageData=function(){var t;return JSON.parse(null!==(t=window.localStorage.getItem(this.storageName))&&void 0!==t?t:"")},t.prototype._initLocalStorage=function(){var t=JSON.stringify({resultKey:null,answers:[]});window.localStorage.setItem(this.storageName,t)},t.prototype._updateField=function(t,e){var n=this._getStorageData();n[t]=e,this._update(n)},t.prototype._update=function(t){window.localStorage.setItem(this.storageName,JSON.stringify(t))},t}();e.default=u},2863:(t,e,n)=>{n(2480),n(9108),Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.questionId=t,this.value=e}return t.createImmutable=function(e,n){var r=new t(e,n);return Object.freeze(this),r},t}();e.default=r}},t=>{t.O(0,[865,767],(()=>{return e=5129,t(t.s=e);var e}));t.O()}]);