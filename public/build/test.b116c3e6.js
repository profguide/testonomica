"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[43],{5670:(e,t,n)=>{n(1477),n(2480);var r=n(8706),o=n(2478),i=(n(8225),n(4832),n(6424),n(422),n(7073),n(233),n(3859),n(662),n(1504),n(6854),n(834),n(3538),n(1945),n(8258),n(2351),n(5436),n(7564),n(9270),n(3562),n(9650),n(5821),"auto"),a="api",c="restore",u="option",s="checkbox",l="text",f="rating",p="gradient",y="https://testonomica.com",d="loaded",h="finish";n(4616),n(6447),n(3922),n(8747);function b(){return document.documentElement.lang}var m={};function v(e){if("en"===b()){var t=m[e];if(t)return t}return e}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},P(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}m["минут"]="minutes",m["Начать"]="Start",m["Продолжить"]="Continue",m["Продолжить тест"]="Continue test",m["Начать сначала"]="Restart",m["Произошла ошибка во время загрузки."]="An error occurred during download.",m["Произошла ошибка во время загрузки результата."]="An error occurred while loading the result.",m["Отказано в доступе."]="Access denied.",m["Задание"]="The task",m["Загрузка результата..."]="Loading result...",m["Результат обрабатывается..."]="The result is processed...",m["Ваши результаты"]="Your results",m["Постоянная ссылка на результат"]="Permanent link to the result",m["Пройти тест заново"]="Take the test again",m["Требуется оплата."]="Payment required.",m["Нажмите, чтобы перейти к оплате"]="Click to proceed to payment",m["Точно описывает меня"]="Exactly describes me",m["Частично описывает меня"]="Partially describes me",m["Нейтрально"]="Neutral",m["Закончилось время, отведённое на вопрос"]="Question time expired",m["секунд"]="seconds",m["Нажмите кнопку продолжить, когда будете готовы продолжить тест."]="Click the Continue button when you are ready to continue with the test.";var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(u,e);var t,n,r,i,a,c=E(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this,e)).api=e.api,t.state={error:null,isLoading:!0,result:null},t}return t=u,n=[{key:"componentDidMount",value:(i=regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.resultKey();case 2:t=e.sent,this.api.result().then((function(e){n.setState(O(O({},n.state),{},{isLoading:!1,key:t,result:e.data}))})).catch((function(e){e.response&&console.error(e.response.data.detail),console.error(e),n.setState(O(O({},n.state),{},{isLoading:!1,error:v("Произошла ошибка во время загрузки результата.")}))}));case 4:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){_(o,n,r,a,c,"next",e)}function c(e){_(o,n,r,a,c,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"render",value:function(){if(this.state.isLoading)return o.createElement("div",{className:"container"},v("Загрузка результата..."));if(this.state.error)return o.createElement("div",{className:"container"},this.state.error);var e="https://testonomica.com/tests/result/"+this.state.key+"/";return o.createElement("div",{className:"tnc-result"},o.createElement("div",{className:"container"},o.createElement("h1",{className:"tnc-result__title"},this.props.test.name),o.createElement("h2",{className:"tnc-result__subtitle"},v("Ваши результаты"),":"),o.createElement("article",{className:"tnc-result__text",dangerouslySetInnerHTML:{__html:this.state.result}}),o.createElement("p",null,o.createElement("span",{style:{fontWeight:"bold"}},v("Постоянная ссылка на результат"),":"),o.createElement("br",null),o.createElement("a",{href:e},e)),o.createElement("button",{onClick:this.props.restartClickHandler,className:"tnc-btn tnc-result__btn-restart"},v("Пройти тест заново"))))}}],n&&j(t.prototype,n),r&&j(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(o.Component);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},N(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(a,e);var t,n,r,i=H(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"render",value:function(){var e;return e=1===this.props.status?o.createElement("div",{className:"tnc-welcome__btns"},o.createElement("button",{onClick:this.props.restoreClickHandler,className:"tnc-btn tnc-welcome__btn tnc-welcome__btn_restore"},v("Продолжить тест")),o.createElement("button",{onClick:this.props.startClickHandler,className:"tnc-btn tnc-welcome__btn tnc-welcome__btn_restart"},v("Начать сначала"))):o.createElement("div",{className:"tnc-welcome__btns"},o.createElement("button",{onClick:this.props.startClickHandler,className:"tnc-btn tnc-welcome__btn tnc-welcome__btn_start"},v("Начать"))),o.createElement("div",{className:"tnc-welcome"},o.createElement("div",{className:"container"},o.createElement("h1",{className:"tnc-welcome__title"},this.props.test.name),o.createElement("div",{className:"tnc-welcome__duration"},this.props.test.duration," ",v("минут")),o.createElement("div",{className:"tnc-welcome__description",dangerouslySetInnerHTML:{__html:this.props.test.description}}),e))}}])&&T(t.prototype,n),r&&T(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component);n(1168),n(510);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},A(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M(e);if(t){var o=M(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return z(this,n)}}function z(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(a,e);var t,n,r,i=D(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"render",value:function(){var e=null,t=null;return this.props.enabledBack&&(e=o.createElement("button",{disabled:this.props.isLoading,onClick:this.props.goBackHandler,className:"tnc-btn tnc-q-nav__btn tnc-q-nav__btn_back"},"←")),this.props.enabledForward&&(t=o.createElement("button",{disabled:this.props.isLoading,onClick:this.props.goForwardHandler,className:"tnc-btn tnc-q-nav__btn tnc-q-nav__btn_forward"},"→")),o.createElement("div",{className:"tnc-q-form__nav tnc-q-nav"},e," ",t)}}])&&I(t.prototype,n),r&&I(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Q(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=G(e);if(t){var o=G(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return V(this,n)}}function V(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Z(e)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}(a,e);var t,n,r,i=J(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).options=t.options.bind(Z(t)),t}return t=a,(n=[{key:"options",value:function(){var e=this;return this.props.options.map((function(t,n){return o.createElement("div",{key:n,className:"tnc-q-form__option-wrapper"},t.img?o.createElement("img",{src:t.img,style:{maxHeight:"100px"},onClick:e.props.isLoading?null:function(){return e.props.selectionHandler(t.value)},className:"tnc-q-form__option-img",alt:"Task"}):o.createElement("button",{disabled:e.props.isLoading,onClick:function(){return e.props.selectionHandler(t.value)},className:"tnc-btn tnc-q-form__option-btn"},t.text))}))}},{key:"render",value:function(){return o.createElement("div",{className:"tnc-q__form tnc-q-form"},o.createElement("div",{className:"tnc-q-form__options"},this.options()),o.createElement(W,{isLoading:this.props.isLoading,enabledBack:this.props.enabledBack,enabledForward:this.props.enabledForward,goForwardHandler:this.props.goForwardHandler,goBackHandler:this.props.goBackHandler}))}}])&&U(t.prototype,n),r&&U(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component);n(3822),n(1566),n(1731),n(9987);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},re(e,t)}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ce(e);if(t){var o=ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ie(this,n)}}function ie(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ae(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}var ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&re(e,t)}(a,e);var t,n,r,i=oe(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={options:e.options,values:[],enabledForward:!1},t.options=t.options.bind(ae(t)),t.clickHandler=t.clickHandler.bind(ae(t)),t.goForwardHandler=t.goForwardHandler.bind(ae(t)),t}return t=a,(n=[{key:"clickHandler",value:function(e){var t=this.state.values,n=t.indexOf(e);n>-1?t.splice(n,1):t.push(e);var r=t.length===parseInt(this.props.count);this.setState(ee(ee({},this.state),{},{values:t,enabledForward:r}))}},{key:"goForwardHandler",value:function(){this.props.goForwardHandler(this.state.values)}},{key:"options",value:function(){var e=this;return this.state.options.map((function(t,n){return o.createElement("div",{key:n,className:"tnc-q-form__option-wrapper"},t.img?o.createElement("img",{src:t.img,style:{maxHeight:"100px"},onClick:function(){return e.clickHandler(t.value,n)},className:"tnc-q-form__option-img "+(e.state.values.includes(t.value)?"tnc-q-form__option-img_selected":""),alt:"Task"}):o.createElement("button",{disabled:e.props.isLoading,onClick:function(){return e.clickHandler(t.value,n)},className:"tnc-btn tnc-q-form__option-btn "+(e.state.values.includes(t.value)?"tnc-q-form__option-btn_selected":"")},t.text))}))}},{key:"render",value:function(){return o.createElement("div",{className:"tnc-q__form tnc-q-form"},o.createElement("div",{className:"tnc-q-form__options"},this.options()),o.createElement(W,{isLoading:this.props.isLoading,enabledBack:this.props.enabledBack,enabledForward:this.state.enabledForward,goForwardHandler:this.goForwardHandler,goBackHandler:this.props.goBackHandler}))}}])&&ne(t.prototype,n),r&&ne(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t){return fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},fe(e,t)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=he(e);if(t){var o=he(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ye(this,n)}}function ye(e,t){if(t&&("object"===se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return de(e)}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e){return he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},he(e)}var be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}(a,e);var t,n,r,i=pe(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={values:[]},t.options=t.options.bind(de(t)),t.onChange=t.onChange.bind(de(t)),t}return t=a,(n=[{key:"onChange",value:function(e,t){var n=this.state.values;n[t]=e,this.setState({values:n})}},{key:"options",value:function(){var e=this;return this.props.options.map((function(t,n){var r;return o.createElement("div",{key:n,className:"tnc-q-form__option-wrapper"},o.createElement("input",{disabled:e.props.isLoading,onChange:function(t){return e.onChange(t.target.value,n)},placeholder:t.text,value:null!==(r=e.state.values[n])&&void 0!==r?r:"",className:"tnc-q-form__option-text"}))}))}},{key:"render",value:function(){var e=this;return o.createElement("div",{className:"tnc-q__form tnc-q-form"},o.createElement("div",{className:"tnc-q-form__options"},this.options()),o.createElement(W,{isLoading:this.props.isLoading,enabledBack:this.props.enabledBack,enabledForward:!0,goForwardHandler:function(){return e.props.selectionHandler(e.state.values)},goBackHandler:this.props.goBackHandler}))}}])&&le(t.prototype,n),r&&le(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component);function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ge(e,t)}function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_e(e);if(t){var o=_e(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Oe(this,n)}}function Oe(e,t){if(t&&("object"===me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ke(e)}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_e(e)}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ge(e,t)}(a,e);var t,n,r,i=we(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={options:t.props.options,values:[]},t.options=t.options.bind(ke(t)),t}return t=a,(n=[{key:"clickHandler",value:function(e,t){var n=this.state.values;n.push(e);var r=this.state.options;r.splice(t,1),this.setState({values:n,options:r}),0===r.length&&this.props.selectionHandler(n)}},{key:"options",value:function(){var e=this;return this.state.options.map((function(t,n){return o.createElement("div",{key:n,className:"tnc-q-form__option-wrapper"},o.createElement("button",{disabled:e.props.isLoading,onClick:function(){return e.clickHandler(t.value,n)},className:"tnc-btn tnc-q-form__option-btn"},t.text))}))}},{key:"render",value:function(){return o.createElement("div",{className:"tnc-q__form tnc-q-form"},o.createElement("div",{className:"tnc-q-form__options"},this.options()),o.createElement(W,{isLoading:this.props.isLoading,enabledBack:this.props.enabledBack,enabledForward:this.props.enabledForward,goForwardHandler:this.props.goForwardHandler,goBackHandler:this.props.goBackHandler}))}}])&&ve(t.prototype,n),r&&ve(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component);function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t){return Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Re(e,t)}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Te(e);if(t){var o=Te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xe(this,n)}}function xe(e,t){if(t&&("object"===Pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qe(e)}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}var Ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Re(e,t)}(a,e);var t,n,r,i=Se(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).options=t.options.bind(qe(t)),t}return t=a,(n=[{key:"name",value:function(e){return v(1===e||3===e?"Частично описывает меня":"Нейтрально")}},{key:"options",value:function(){var e=this;return this.props.options.map((function(t,n){return o.createElement("div",{key:n,className:"tnc-q-form__option-wrapper",onClick:function(){return e.props.selectionHandler(t.value)}},o.createElement("button",{disabled:e.props.isLoading,className:"tnc-btn tnc-q-form__option-btn"}),o.createElement("span",{className:"tnc-q-form__option-name"},0===n||4===n?t.text:e.name(n)))}))}},{key:"render",value:function(){return o.createElement("div",{className:"tnc-q__form tnc-q-form tnc-form-gradient"},o.createElement("div",{className:"tnc-form-gradient__compared"},o.createElement("div",{className:"tnc-form-gradient__compared-item"},this.props.options[0].text),o.createElement("div",{className:"tnc-form-gradient__compared-item"},this.props.options[this.props.options.length-1].text)),o.createElement("div",{className:"tnc-q-form__options"},this.options()),o.createElement("div",{className:"tnc-form-gradient__values"},o.createElement("div",{className:"tnc-form-gradient__values-item"},v("Точно описывает меня")),o.createElement("div",{className:"tnc-form-gradient__values-item"},v("Нейтрально")),o.createElement("div",{className:"tnc-form-gradient__values-item"},v("Точно описывает меня"))),o.createElement(W,{isLoading:this.props.isLoading,enabledBack:this.props.enabledBack,enabledForward:this.props.enabledForward,goForwardHandler:this.props.goForwardHandler,goBackHandler:this.props.goBackHandler}))}}])&&Ee(t.prototype,n),r&&Ee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component);function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t){return Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Be(e,t)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ie(e);if(t){var o=Ie(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fe(this,n)}}function Fe(e,t){if(t&&("object"===He(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ie(e){return Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ie(e)}var Ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Be(e,t)}(a,e);var t,n,r,i=Le(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"render",value:function(){var e=100*(this.props.number-1)/this.props.length;return o.createElement("div",{className:"tnc-q__progress-bar tnc-q-progress-bar"},o.createElement("div",{className:"tnc-q-progress-bar__counters"},o.createElement("span",null,this.props.number),"/",o.createElement("span",null,this.props.length)),o.createElement("div",{className:"tnc-q-progress-bar__line-wrapper"},o.createElement("div",{className:"tnc-q-progress-bar__line",role:"progressbar",style:{width:e+"%"},"aria-valuenow":e,"aria-valuemin":e,"aria-valuemax":"100"})))}}])&&Ce(t.prototype,n),r&&Ce(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component);function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t){return We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},We(e,t)}function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qe(e);if(t){var o=Qe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ue(this,n)}}function Ue(e,t){if(t&&("object"===De(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Qe(e){return Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qe(e)}var Je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&We(e,t)}(a,e);var t,n,r,i=Ke(a);function a(){return ze(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){return o.createElement("article",{className:"tnc-q-loading"},o.createElement("h2",{className:"tnc-q-loading__name tnc-stage"}),o.createElement("div",{className:"tnc-q-loading__form"},o.createElement("div",{className:"tnc-q-loading__form-q tnc-q-loading__form-q_1 tnc-stage"}),o.createElement("div",{className:"tnc-q-loading__form-q tnc-q-loading__form-q_2 tnc-stage"})),o.createElement("div",{className:"tnc-q-loading__progress-bar tnc-stage"}))}}])&&Me(t.prototype,n),r&&Me(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component);n(1916);function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){Ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e,t){return Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Xe(e,t)}function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rt(e);if(t){var o=rt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return tt(this,n)}}function tt(e,t){if(t&&("object"===Ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nt(e)}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rt(e){return rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rt(e)}var ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xe(e,t)}(a,e);var t,n,r,i=et(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).interval=null,t.state={timer:e.timer>0?e.timer:null,timeOut:!1},t.timeOut=t.timeOut.bind(nt(t)),t}return t=a,(n=[{key:"componentDidMount",value:function(){if(this.state.timer){console.log("timer",this.state.timer);var e=this;this.interval=setInterval((function(){e.state.timer>1?e.setState(Ge(Ge({},e.state),{},{timer:e.state.timer-1})):(clearInterval(e.interval),e.timeOut())}),1e3)}}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"timeOut",value:function(){console.log("timeout"),this.setState(Ge(Ge({},this.state),{},{timeOut:!0}))}},{key:"render",value:function(){return this.state.timeOut?o.createElement("div",null,o.createElement("p",null,v("Закончилось время, отведённое на вопрос")," (",this.props.timer," ",v("секунд"),").",v("Нажмите кнопку продолжить, когда будете готовы продолжить тест.")),o.createElement("button",{onClick:this.props.goForwardHandler,className:"btn btn-primary"},v("Продолжить"))):this.props.children}}])&&$e(t.prototype,n),r&&$e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component);function it(e){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(e)}function at(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function ct(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){at(i,r,o,a,c,"next",e)}function c(e){at(i,r,o,a,c,"throw",e)}a(void 0)}))}}function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e,t){return pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pt(e,t)}function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bt(e);if(t){var o=bt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dt(this,n)}}function dt(e,t){if(t&&("object"===it(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ht(e)}function ht(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bt(e){return bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},bt(e)}var mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pt(e,t)}(h,e);var t,n,r,i,a,y,d=yt(h);function h(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=d.call(this,e)).state={isLoading:!0,error:null,question:null},t.api=e.api;var n={};return n[u]=Y,n[s]=ue,n[l]=be,n[f]=je,n[p]=Ne,t.formTypeMap=n,t.selectionHandler=t.selectionHandler.bind(ht(t)),t.goForwardHandler=t.goForwardHandler.bind(ht(t)),t.goBackHandler=t.goBackHandler.bind(ht(t)),t}return t=h,n=[{key:"componentDidMount",value:function(){this.props.task===c?this.next():this.start()}},{key:"selectionHandler",value:function(e){return this.saveAndForward(e)}},{key:"start",value:function(){return this.setState(st(st({},this.state),{},{isLoading:!0})),this.api.clear(),this.wrapQuestionResponse(this.api.first())}},{key:"next",value:function(){return this.setState(st(st({},this.state),{},{isLoading:!0})),this.wrapQuestionResponse(this.api.next())}},{key:"prev",value:function(){return this.setState(st(st({},this.state),{},{isLoading:!0})),this.wrapQuestionResponse(this.api.prev())}},{key:"goForwardHandler",value:function(){return this.saveAndForward(null)}},{key:"goBackHandler",value:function(){this.prev()}},{key:"saveAndForward",value:(y=ct(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState(st(st({},this.state),{},{isLoading:!0})),this.api.addAnswer(t).then((function(){n.api.progressFull().then((function(e){e?n.props.questionsOverHandler():n.next()}))}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"wrapQuestionResponse",value:(a=ct(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.wrapResponse(t,(function(e){n.setState(st(st({},n.state),{},{isLoading:!1,question:e}))}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"wrapResponse",value:(i=ct(regeneratorRuntime.mark((function e(t,n){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.then(n).catch((function(e){var t=v("Произошла ошибка во время загрузки.");e.response&&(console.error(e.response.data.detail),403===e.response.status&&(t=v("Отказано в доступе."))),console.error(e),r.setState(st(st({},r.state),{},{isLoading:!1,error:t}))}));case 2:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)})},{key:"render",value:function(){if(this.state.error)return this.state.error;if(null===this.state.question)return o.createElement("div",{className:"container"},o.createElement(Je,null));var e=this.state.question,t=e.options,n=e.type.get(),r=e.enabledForward&&e.number<e.length,i=e.enabledBack&&e.number>1,a=this.formTypeMap[n];return o.createElement("section",{className:"tnc-q-wrapper"},o.createElement("article",{className:"tnc-q tnc-q__"+this.props.testId+"-"+e.id},o.createElement("div",{className:"container"},o.createElement("div",{className:"tnc-q-inner"},o.createElement(ot,{timer:e.timer,goForwardHandler:this.goForwardHandler,key:e.id},e.img?o.createElement("img",{className:"tnc-q__img",src:e.img,alt:v("Задание")}):null,o.createElement("h2",{className:"tnc-q__name"},e.name),e.text?o.createElement("div",{className:"tnc-q__text",dangerouslySetInnerHTML:{__html:e.text}}):null,o.createElement(a,{key:e.id,options:t,count:e.count,isLoading:this.state.isLoading,enabledBack:i,enabledForward:r,selectionHandler:this.selectionHandler,goForwardHandler:this.goForwardHandler,goBackHandler:this.goBackHandler}),o.createElement(Ae,{length:e.length,number:e.number}))))))}}],n&&ft(t.prototype,n),r&&ft(t,r),Object.defineProperty(t,"prototype",{writable:!1}),h}(o.Component);function vt(e,t,n,r,o,i,a,c){"function"!=typeof c&&(c=function(){});var u={cloudPayments:{CustomerReceipt:{Items:[{label:t,price:n,quantity:r,amount:o,vat:0,method:1,object:4,measurementUnit:"шт"}],taxationSystem:1,isBso:!1,AgentSign:null,amounts:{electronic:o}}}};(new cp.CloudPayments).pay("charge",{publicId:"pk_4b7104d27e7b85f12bb8524658b16",description:t,amount:o,currency:"RUB",invoiceId:e,skin:"mini",data:u},{onSuccess:i,onFail:a,onComplete:c})}function gt(e){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gt(e)}function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jt(e,t){return jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jt(e,t)}function Pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=St(e);if(t){var o=St(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Et(this,n)}}function Et(e,t){if(t&&("object"===gt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Rt(e)}function Rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function St(e){return St=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},St(e)}var xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jt(e,t)}(a,e);var t,n,r,i=Pt(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={isLoading:!0,isOpened:!1,error:null},t.onSuccess=t.onSuccess.bind(Rt(t)),t.onFail=t.onFail.bind(Rt(t)),t.initPaymentWidget=t.initPaymentWidget.bind(Rt(t)),t.setBodyHeightAuto=t.setBodyHeightAuto.bind(Rt(t)),t.setBodyFixHeight=t.setBodyFixHeight.bind(Rt(t)),t}return t=a,(n=[{key:"componentDidMount",value:function(){var e=this;this.wrapRequest(this.props.api.hasAccess(),(function(t){e.setState(Ot(Ot({},e.state),{},{isLoading:!1})),t?e.props.onAccessed():e.initPaymentWidget()}))}},{key:"componentWillUnmount",value:function(){this.setBodyHeightAuto()}},{key:"initPaymentWidget",value:function(){var e=this;this.setState(Ot(Ot({},this.state),{},{isLoading:!0})),this.wrapRequest(this.props.api.getOrder(),(function(t){e.setBodyFixHeight(),new vt(t.id,t.description,t.price,t.count,t.sum,e.onSuccess,e.onFail),e.setState(Ot(Ot({},e.state),{},{isOpened:!0,isLoading:!1}))}))}},{key:"onSuccess",value:function(){var e=this;this.setBodyHeightAuto(),this.setState(Ot(Ot({},this.state),{},{isOpened:!1})),this.wrapRequest(this.props.api.grand(),(function(){e.props.onAccessed()}))}},{key:"onFail",value:function(){this.setBodyHeightAuto(),this.setState(Ot(Ot({},this.state),{},{isOpened:!1}))}},{key:"setBodyFixHeight",value:function(){document.body.style.height="600px"}},{key:"setBodyHeightAuto",value:function(){document.body.style.height="auto"}},{key:"wrapRequest",value:function(e,t){var n=this;e.then(t).catch((function(e){var t=v("Произошла ошибка во время загрузки.");403===e.response.status&&(t=v("Отказано в доступе.")),n.setState(Ot(Ot({},n.state),{},{isLoading:!1,error:t})),console.error(e.response.data.detail),console.error(e)}))}},{key:"render",value:function(){return this.state.error?o.createElement("div",{className:"container"},this.state.error):this.state.isLoading||this.state.isOpened?null:o.createElement("div",{className:"container"},o.createElement("div",null,v("Требуется оплата.")),o.createElement("button",{className:"btn btn-primary",onClick:this.initPaymentWidget},v("Нажмите, чтобы перейти к оплате")))}}])&&_t(t.prototype,n),r&&_t(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Component);function qt(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function Tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(n),!0).forEach((function(t){Ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lt="welcome",Ft="quiz",It="result",At="payment";const Dt=function(e){var t=e.api,n=e.config,r=Ct((0,o.useState)({isLoading:!0,error:null,test:null,status:null,screen:null,quizTask:null,mainDivRef:null}),2),i=r[0],a=r[1],u=function(t){e.dispatcher&&e.dispatcher.dispatchEvent(t)},s=function(e,t){e.then(t).catch((function(e){var t=v("Произошла ошибка во время загрузки.");console.error(e),e.response&&(console.error(e.response.data.detail),403===e.response.status&&(t=v("Отказано в доступе."))),a(Nt(Nt({},i),{},{isLoading:!1,error:t}))}))},l=function(){a(Nt(Nt({},i),{},{screen:Ft,quizTask:"start"}))};if((0,o.useEffect)((function(){new ResizeObserver((function(e){u(new CustomEvent("resize",{detail:e}))})).observe(document.body),s(t.description(),(function(e){t.progressStatus().then(function(){var r,o=(r=regeneratorRuntime.mark((function r(o){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.progressFull();case 2:r.sent&&1===o?s(t.saveResult(),(function(t){u(new CustomEvent(d)),u(new CustomEvent(h,{detail:{key:t}})),a(Nt(Nt({},i),{},{status:o,isLoading:!1,test:e,screen:It}))})):2===o&&n.isShowResultAfterLoad()?(u(new CustomEvent(d)),a(Nt(Nt({},i),{},{status:o,isLoading:!1,test:e,screen:It}))):(u(new CustomEvent(d)),e.paid?a(Nt(Nt({},i),{},{status:o,isLoading:!1,test:e,screen:At})):a(Nt(Nt({},i),{},{status:o,isLoading:!1,test:e,screen:Lt})));case 4:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function a(e){qt(i,n,o,a,c,"next",e)}function c(e){qt(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(e){return o.apply(this,arguments)}}())}))}),[]),i.isLoading)return null;if(i.error)return i.error;if(i.screen===At)return o.createElement(xt,{api:t,onAccessed:function(){a(Nt(Nt({},i),{},{isLoading:!1,screen:Lt}))},dispatcher:e.dispatcher});if(!i.test)return null;return o.createElement("div",{id:"tnc",className:"tnc"},i.screen===It&&(n.isDisplayReport()?o.createElement(x,{api:t,test:i.test,restartClickHandler:l}):o.createElement("div",{className:"container"},v("Результат обрабатывается..."))),i.screen===Lt?o.createElement(L,{test:i.test,status:i.status,startClickHandler:l,restoreClickHandler:function(){a(Nt(Nt({},i),{},{screen:Ft,quizTask:c}))}}):null,i.screen===Ft?o.createElement(mt,{testId:t.testId,api:t,questionsOverHandler:function(){a(Nt(Nt({},i),{},{isLoading:!0})),s(t.saveResult(),(function(e){u(new CustomEvent(h,{detail:{key:e}})),a(Nt(Nt({},i),{},{isLoading:!1,screen:It}))}))},task:i.quizTask}):null)};n(3195);var zt=n(4773),Mt=n.n(zt);n(9108);function Wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kt(e,t,n){return t&&Wt(e.prototype,t),n&&Wt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Ut=Kt((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.name=t.name,this.text=t.text,this.img=t.img,this.type=t.type,this.count=t.count,this.timer=t.timer,this.enabledBack=t.enabledBack,this.enabledForward=t.enabledForward,this.number=t.number,this.length=t.length,this.options=t.options}));function Qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e,t,n){return t&&Qt(e.prototype,t),n&&Qt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Vt=Jt((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.value=t.value,this.text=t.text,this.img=t.img}));function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Gt=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),![u,s,l,f,p].includes(t)){var n="Unknown question type: "+t;throw console.error(n),new Error(n)}this.value=t}var t,n,r;return t=e,(n=[{key:"get",value:function(){return this.value}}])&&Zt(t.prototype,n),r&&Zt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $t=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"hydrate",value:function(e){var t=new Gt(e.data.question.type);Object.freeze(t);var n=e.data.question.items.map((function(e){return new Vt({value:e.value,text:e.text,img:e.img})})),r=new Ut({id:e.data.question.id,name:e.data.question.name,text:e.data.question.text,img:e.data.question.img,enabledBack:e.data.question.enabledBack,enabledForward:e.data.question.enabledForward,count:parseInt(e.data.question.count),timer:parseInt(e.data.question.timer),number:e.data.number,length:e.data.length,type:t,options:n});return Object.freeze(r),r}}])&&Yt(t.prototype,n),r&&Yt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var en=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.questionId=t,this.value=n}var t,n,r;return t=e,r=[{key:"createImmutable",value:function(t,n){var r=new e(t,n);return Object.freeze(this),r}}],(n=null)&&Xt(t.prototype,n),r&&Xt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nn=function(){function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.description=n,this.price=r,this.count=o,this.sum=i}var t,n,r;return t=e,r=[{key:"createImmutable",value:function(t,n,r,o,i){var a=new e(t,n,r,o,i);return Object.freeze(this),a}}],(n=null)&&tn(t.prototype,n),r&&tn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rn(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function on(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){rn(i,r,o,a,c,"next",e)}function c(e){rn(i,r,o,a,c,"throw",e)}a(void 0)}))}}function an(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var cn=function(){function e(t,n,r,o){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!n)throw new Error("testId must be defined.");this.testId=n,this.host=(null!=r?r:y)+("en"===b()?"/en":""),this.token=o,this.storage=t,this.test=null,this.question=null}var t,n,r,o,i,a,c,u;return t=e,n=[{key:"hasAccess",value:function(){var e={method:"get",url:this.host+"/access/has/",responseType:"json"};return this.token&&(e.headers={token:this.token}),Mt()(e).then((function(e){return e.data.status}))}},{key:"grand",value:function(){var e=this;return Mt()(this.tokenizedRequest({method:"get",url:this.host+"/access/grand/",responseType:"json"})).then((function(t){return e.token=t.data.token,!0}))}},{key:"getOrder",value:function(){return Mt()(this.tokenizedRequest({method:"get",url:this.host+"/access/order/",responseType:"json"})).then((function(e){var t=e.data.order;return new nn(t.id,t.description,t.price,t.count,t.sum)}))}},{key:"description",value:function(){var e=this;return Mt()({method:"get",url:this.buildUrl("/info/".concat(this.testId,"/")),responseType:"json"}).then((function(t){return e.test={name:t.data.name,description:t.data.description,duration:t.data.duration,length:t.data.length,paid:t.data.paid},e.test}))}},{key:"progressStatus",value:function(){return this.storage.getStatus()}},{key:"progressFull",value:(u=on(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.test.length,e.next=3,this.storage.getLength();case 3:return e.t1=e.sent,e.abrupt("return",e.t0===e.t1);case 5:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"saveResult",value:(c=on(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Saving..."),e.abrupt("return",this.storage.getAnswers().then((function(e){return Mt()(t.tokenizedRequest({method:"post",url:t.buildUrl("/save/".concat(t.testId,"/")),data:{progress:e}})).then((function(e){t.token=e.headers["x-token"];var n=e.data.key;return t.storage.setFinished(n),n}))})));case 2:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"result",value:(a=on(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.resultKey();case 2:return t=e.sent,e.abrupt("return",Mt()(this.tokenizedRequest({method:"get",url:this.buildUrl("/result/".concat(this.testId,"/?key=").concat(t))})).then((function(e){return n.token=e.headers["x-token"],e})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"resultKey",value:function(){return this.storage.resultKey()}},{key:"clear",value:(i=on(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.clear();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"first",value:function(){var e=this;return Mt()(this.tokenizedRequest({method:"get",url:this.buildUrl("/first/"+this.testId+"/"),responseType:"json"})).then((function(t){return e.token=t.headers["x-token"],e.question=(new $t).hydrate(t),e.question}))}},{key:"next",value:(o=on(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.question){e.next=4;break}t=this.question.id,e.next=8;break;case 4:return e.next=6,this.storage.getLastAnswer();case 6:n=e.sent,t=n.questionId;case 8:return e.abrupt("return",Mt()(this.tokenizedRequest({method:"get",url:this.buildUrl("/next/"+this.testId+"/?q="+t),responseType:"json"})).then((function(e){return r.token=e.headers["x-token"],r.question=(new $t).hydrate(e),r.question})));case 9:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"prev",value:function(){var e=this;return Mt()(this.tokenizedRequest({method:"get",url:this.buildUrl("/prev/"+this.testId+"/?q="+this.question.id),responseType:"json"})).then((function(t){return e.token=t.headers["x-token"],e.question=(new $t).hydrate(t),e.question}))}},{key:"addAnswer",value:function(e){return this.storage.addAnswer(en.createImmutable(this.question.id,e))}},{key:"buildUrl",value:function(e){return"".concat(this.host,"/tests/api/v1").concat(e)}},{key:"tokenizedRequest",value:function(e){return this.token&&(e.headers={token:this.token}),e}}],n&&an(t.prototype,n),r&&an(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var sn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners={}}var t,n,r;return t=e,(n=[{key:"addEventListener",value:function(e,t){this.listeners[e]=t}},{key:"dispatchEvent",value:function(e){this.listeners[e.type]&&this.listeners[e.type](e.detail)}}])&&un(t.prototype,n),r&&un(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();n(6615);function ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fn(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function pn(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,dn(e,t,"get"))}function yn(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,dn(e,t,"set"),n),n}function dn(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var hn=new WeakMap,bn=new WeakMap,mn=new WeakMap,vn=new WeakMap,gn=new WeakMap,wn=new WeakMap,On=new WeakMap,kn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),fn(this,hn,{writable:!0,value:void 0}),fn(this,bn,{writable:!0,value:void 0}),fn(this,mn,{writable:!0,value:void 0}),fn(this,vn,{writable:!0,value:void 0}),fn(this,gn,{writable:!0,value:void 0}),fn(this,wn,{writable:!0,value:void 0}),fn(this,On,{writable:!0,value:void 0}),yn(this,hn,e.confTestId(t)),yn(this,bn,e.confHost(t)),yn(this,mn,e.confToken(t)),yn(this,vn,e.confInit(t)),yn(this,gn,e.confStartScreen(t)),yn(this,wn,e.confDisplayReport(t)),yn(this,On,e.confShowResultAfterLoad(t))}var t,n,r;return t=e,r=[{key:"confTestId",value:function(t){return e.textValue("testId",t.testId)}},{key:"confHost",value:function(t){return e.textValue("host",t.host)}},{key:"confToken",value:function(e){return e.token}},{key:"confInit",value:function(t){return e.textValue("init",t.init,[i,"manual"])}},{key:"confStartScreen",value:function(t){return e.textValue("startScreen",t.startScreen,["none",a,"live"],a)}},{key:"confDisplayReport",value:function(t){return!t.hasOwnProperty("displayReport")||e.isTrue(t.displayReport)}},{key:"confShowResultAfterLoad",value:function(t){return!t.hasOwnProperty("showResultAfterLoad")||e.isTrue(t.showResultAfterLoad)}},{key:"isTrue",value:function(e){return!0===e||"true"===e||"1"===e||1===e}},{key:"textValue",value:function(e,t,n,r){if(!t){if(r)return r;throw new Error("InvalidArgumentException: missing config property ".concat(e,"."))}if(n){if(n.includes(t))return t;throw new Error("InvalidArgumentException: config param ".concat(e,' contains unsupported value "').concat(t,'".'))}return t}}],(n=[{key:"getTestId",value:function(){return pn(this,hn)}},{key:"getHost",value:function(){return pn(this,bn)}},{key:"getInit",value:function(){return pn(this,vn)}},{key:"getToken",value:function(){return pn(this,mn)}},{key:"isDisplayReport",value:function(){return pn(this,wn)}},{key:"isShowResultAfterLoad",value:function(){return pn(this,On)}}])&&ln(t.prototype,n),r&&ln(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var jn=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=new cn(t,n,r,o),this.dispatcher=new sn}var t,n,i;return t=e,n=[{key:"createApp",value:function(e,t){r.render(o.createElement(Dt,{api:this.api,config:t,dispatcher:this.dispatcher}),e)}},{key:"addEventListener",value:function(e,t){this.dispatcher.addEventListener(e,t)}}],n&&_n(t.prototype,n),i&&_n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Pn(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function En(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Pn(i,r,o,a,c,"next",e)}function c(e){Pn(i,r,o,a,c,"throw",e)}a(void 0)}))}}function Rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Sn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storageName="testonomica_test_"+t,localStorage.getItem(this.storageName)||this._initLocalStorage()}var t,n,r,o,i,a,c,u,s,l,f;return t=e,n=[{key:"resultKey",value:(f=En(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._getStorageData().resultKey);case 1:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"clear",value:(l=En(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._initLocalStorage();case 1:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"addAnswer",value:(s=En(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this._getStorageData().answers)[t.questionId]=t.value,this._updateField("answers",n);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"getAnswers",value:(u=En(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._getStorageData().answers);case 1:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"getLastAnswer",value:(c=En(regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getStorageData().answers,n=Object.keys(t),r=n[n.length-1],o=t[r],e.abrupt("return",en.createImmutable(r,o));case 5:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getLength",value:(a=En(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object.keys(this._getStorageData().answers).length);case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getStatus",value:(i=En(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._getStorageData()).resultKey){e.next=5;break}return e.abrupt("return",2);case 5:if(!(Object.keys(t.answers).length>0)){e.next=9;break}return e.abrupt("return",1);case 9:return e.abrupt("return",0);case 10:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"setFinished",value:(o=En(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._updateField("resultKey",t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"_getStorageData",value:function(){return JSON.parse(localStorage.getItem(this.storageName))}},{key:"_initLocalStorage",value:function(){var e=JSON.stringify({resultKey:null,answers:{}});localStorage.setItem(this.storageName,e)}},{key:"_updateField",value:function(e,t){var n=this._getStorageData();n[e]=t,this._update(n)}},{key:"_update",value:function(e){localStorage.setItem(this.storageName,JSON.stringify(e))}}],n&&Rn(t.prototype,n),r&&Rn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),xn=n(7440),qn=n(3233);function Tn(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function Nn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Tn(i,r,o,a,c,"next",e)}function c(e){Tn(i,r,o,a,c,"throw",e)}a(void 0)}))}}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(0,xn.ZF)({apiKey:"AIzaSyAxhWpbBwpTvc2V6LzaUJA1P_TOen32Eck",authDomain:"testonomica.firebaseapp.com",projectId:"testonomica",storageBucket:"testonomica.appspot.com",messagingSenderId:"284531372526",appId:"1:284531372526:web:034f85dfbf4449db4edeff",measurementId:"G-6MZ0WZNF88"});var Cn,Bn=(0,qn.ad)(),Ln=null,Fn=null,In=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.answersRef=(0,qn.JU)(Bn,"users/sid_".concat(n,"/test_").concat(t),"answers"),this.statusRef=(0,qn.JU)(Bn,"users/sid_".concat(n,"/test_").concat(t),"state")}var t,n,r,o,i,a,c,u;return t=e,n=[{key:"resultKey",value:(u=Nn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Fn){e.next=3;break}return console.log("resultKey: from cache"),e.abrupt("return",Fn);case 3:return e.next=5,(0,qn.QT)(this.statusRef);case 5:if(!(t=e.sent).exists()||!t.data().resultKey){e.next=9;break}return Fn=t.data().resultKey,e.abrupt("return",Fn);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"clear",value:function(){var e=this;return console.log("clear"),(0,qn.pl)(this.answersRef,{}).then((function(){return(0,qn.pl)(e.statusRef,{})}))}},{key:"addAnswer",value:function(e){var t={};return t[e.questionId]=e.value,(0,qn.r7)(this.answersRef,t).then((function(){Ln=null}))}},{key:"getAnswers",value:(c=Nn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ln){e.next=3;break}return console.log("answers: from cache"),e.abrupt("return",Ln);case 3:return e.next=5,(0,qn.QT)(this.answersRef);case 5:if(!(t=e.sent).exists()){e.next=11;break}return Ln=t.data(),e.abrupt("return",Ln);case 11:return e.abrupt("return",{});case 12:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getLastAnswer",value:(a=Nn(regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAnswers();case 2:return t=e.sent,n=Object.keys(t),r=n[n.length-1],o=t[r],e.abrupt("return",en.createImmutable(r,o));case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getLength",value:(i=Nn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAnswers();case 2:return t=e.sent,e.abrupt("return",Object.keys(t).length);case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getStatus",value:(o=Nn(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resultKey();case 2:if(!e.sent){e.next=5;break}return e.abrupt("return",2);case 5:return e.next=7,this.getLength();case 7:if(!(e.sent>0)){e.next=12;break}return e.abrupt("return",1);case 12:return e.abrupt("return",0);case 13:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"setFinished",value:function(e){return(0,qn.r7)(this.statusRef,{resultKey:e})}}],n&&Hn(t.prototype,n),r&&Hn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),An=document.getElementById("testonomica_app"),Dn=function(e){var t,n,r,o,c,u,s=e.getAttribute("data-test");if(!s)throw new Error("tag must include attribute: data-test");return new kn({testId:s,host:null!==(t=e.getAttribute("data-host"))&&void 0!==t?t:y,token:null!==(n=e.getAttribute("data-token"))&&void 0!==n?n:null,init:null!==(r=e.getAttribute("data-init"))&&void 0!==r?r:i,startScreen:null!==(o=e.getAttribute("data-start-screen"))&&void 0!==o?o:a,displayReport:null===(c=e.getAttribute("data-display-report"))||void 0===c||c,showResultAfterLoad:null===(u=e.getAttribute("data-show-result-after-load"))||void 0===u||u})}(An),zn=null;if((Cn=navigator.cookieEnabled)||(document.cookie="testcookie",Cn=-1!==document.cookie.indexOf("testcookie")),Cn)zn=new Sn(Dn.getTestId());else{var Mn=An.getAttribute("data-sid");if(!Mn)throw Error("Error: sid has to be specified.");zn=new In(Dn.getTestId(),Mn)}window.testonomica=new jn(zn,Dn.getTestId(),Dn.getHost(),Dn.getToken()),Dn.getInit()===i&&window.testonomica.createApp(An,Dn)}},e=>{e.O(0,[297],(()=>{return t=5670,e(e.s=t);var t}));e.O()}]);