"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[43],{4954:(t,e,n)=>{n(4832),n(6424),n(1477),n(2480);var r=n(8706),o=n(2478),i=(n(8225),n(1168),n(422),n(4616),n(6447),n(233),n(3922),n(8747),n(8258),n(2351),n(5436),n(7564),n(9270),n(3562),n(9650),n(5821),n(3859),n(662),n(1504),n(6854),n(1559)),a="questions-over",c="question-load",u="answer-receive",s="start-click",l="restart-click",f=(n(3538),n(510),n(7213));function p(){return document.documentElement.lang}var y={};function h(t){if("en"===p()){var e=y[t];if(e)return e}return t}function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e&&m(t.prototype,e),n&&m(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}function g(t,e){return g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},g(t,e)}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=E(t);if(e){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function E(t){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},E(t)}y["минут"]="minutes",y["Начать"]="Start",y["Начать тест"]="Start the test",y["Продолжить"]="Continue",y["Продолжить тест"]="Continue test",y["Начать сначала"]="Restart",y["Произошла ошибка во время загрузки."]="An error occurred during download.",y["Произошла ошибка во время загрузки результата."]="An error occurred while loading the result.",y["Отказано в доступе."]="Access denied.",y["Задание"]="The task",y["Загрузка результата..."]="Loading result...",y["Результат обрабатывается..."]="The result is processed...",y["Ваши результаты"]="Your results",y["Постоянная ссылка на результат"]="Permanent link to the result",y["Пройти тест заново"]="Take the test again",y["Требуется оплата."]="Payment required.",y["Нажмите, чтобы перейти к оплате"]="Click to proceed to payment",y["Точно описывает меня"]="Exactly describes me",y["Частично описывает меня"]="Partially describes me",y["Нейтрально"]="Neutral",y["Закончилось время, отведённое на вопрос"]="Question time expired",y["секунд"]="seconds",y["Нажмите кнопку продолжить, когда будете готовы продолжить тест."]="Click the Continue button when you are ready to continue with the test.",y["Автор теста:"]="Test author:",y["Авторы теста:"]="Test authors:",y["Инструкция"]="Instruction";var k=function(t){w(n,t);var e=_(n);function n(t){return b(this,n),e.call(this,t)}return v(n,[{key:"render",value:function(){var t;if(t=this.props.status===i.STATUS_IN_PROGRESS?o.createElement("div",{className:"tnc-welcome__btns"},o.createElement("button",{onClick:this.props.restoreClickHandler,className:"tnc-btn tnc-welcome__btn tnc-welcome__btn_restore"},h("Продолжить тест")),o.createElement("button",{onClick:this.props.restartClickHandler,className:"tnc-btn tnc-welcome__btn tnc-welcome__btn_restart"},h("Начать сначала"))):o.createElement("div",{className:"tnc-welcome__btns"},o.createElement("button",{onClick:this.props.startClickHandler,className:"tnc-btn tnc-welcome__btn tnc-welcome__btn_start"},h("Начать"))),this.props.startScreenConfig===i.START_SCREEN_LIVE){var e=this.props.content;return o.createElement("div",{className:"tnc-welcome"},(0,f.ZP)(e,{replace:function(e){if(e.attribs&&"testonomica_buttons"===e.attribs.id)return t}}))}return o.createElement("div",{className:"tnc-welcome"},o.createElement("div",{className:"container"},o.createElement("h1",{className:"tnc-welcome__title"},this.props.test.name),o.createElement("div",{className:"tnc-welcome__duration"},this.props.test.duration," ",h("минут")),o.createElement("div",{className:"tnc-welcome__description",dangerouslySetInnerHTML:{__html:this.props.test.description}}),o.createElement(S,{authors:this.props.test.authors}),t))}}]),n}(o.Component),S=function(t){w(n,t);var e=_(n);function n(t){return b(this,n),e.call(this,t)}return v(n,[{key:"render",value:function(){var t=this;return this.props.authors?0===this.props.authors.length?null:o.createElement("div",{className:"tnc-welcome__description"},this.props.authors.length>1?h("Авторы теста:"):h("Автор теста:")," ",this.props.authors.map((function(e,n){return o.createElement("span",{key:n},o.createElement("a",{href:e.url},e.name),n+1<t.props.authors.length?", ":".")}))):null}}]),n}(o.Component);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e){return j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},j(t,e)}function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=I(t);if(e){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return N(this,n)}}function N(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function I(t){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},I(t)}var C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(a,t);var e,n,r,i=R(a);function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,t)}return e=a,(n=[{key:"render",value:function(){return o.createElement("div",{className:"tnc-instruction"},o.createElement("div",{className:"container"},o.createElement("h1",{className:"tnc-instruction__title"},this.props.test.name),o.createElement("p",{className:"tnc-instruction__subtitle"},h("Инструкция")),o.createElement("div",{className:"tnc-instruction__text",dangerouslySetInnerHTML:{__html:this.props.test.instruction}}),o.createElement("button",{className:"tnc-instruction__btn tnc-btn",onClick:this.props.startClickHandler},h("Начать тест"))))}}])&&P(e.prototype,n),r&&P(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);n(1916);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function q(t,e){return q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},q(t,e)}function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=D(t);if(e){var o=D(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(t,e){if(e&&("object"===A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e)}(a,t);var e,n,r,i=H(a);function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,t)}return e=a,(n=[{key:"render",value:function(){var t=null,e=null;return this.props.enabledBack&&(t=o.createElement("button",{disabled:this.props.isLoading,onClick:this.props.goBackHandler,className:"tnc-btn tnc-q-nav__btn tnc-q-nav__btn_back"},"←")),this.props.enabledForward&&(e=o.createElement("button",{disabled:this.props.isLoading,onClick:this.props.goForwardHandler,className:"tnc-btn tnc-q-nav__btn tnc-q-nav__btn_forward"},"→")),o.createElement("div",{className:"tnc-q-form__nav tnc-q-nav"},t," ",e)}}])&&x(e.prototype,n),r&&x(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Q(t,e){return Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Q(t,e)}function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=K(t);if(e){var o=K(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return z(this,n)}}function z(t,e){if(e&&("object"===U(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Y(t)}function Y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function K(t){return K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},K(t)}var G=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q(t,e)}(a,t);var e,n,r,i=M(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).options=e.options.bind(Y(e)),e}return e=a,(n=[{key:"options",value:function(){var t=this;return this.props.options.map((function(e,n){return o.createElement("div",{key:n,className:"tnc-q-form__option-wrapper"},e.img?o.createElement("img",{src:e.img,onClick:t.props.isLoading?null:function(){return t.props.selectionHandler(e.value)},className:"tnc-q-form__option-img",alt:"Task"}):o.createElement("button",{disabled:t.props.isLoading,onClick:function(){return t.props.selectionHandler(e.value)},className:"tnc-btn tnc-q-form__option-btn"},e.text))}))}},{key:"render",value:function(){return o.createElement("div",{className:"tnc-q__form tnc-q-form"},o.createElement("div",{className:"tnc-q-form__options"},this.options()),o.createElement(B,{isLoading:this.props.isLoading,enabledBack:this.props.enabledBack,enabledForward:this.props.enabledForward,goForwardHandler:this.props.goForwardHandler,goBackHandler:this.props.goBackHandler}))}}])&&F(e.prototype,n),r&&F(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);n(3822),n(1566),n(1731),n(9987);function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){J(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function J(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $(t,e){return $=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},$(t,e)}function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rt(t);if(e){var o=rt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return et(this,n)}}function et(t,e){if(e&&("object"===Z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return nt(t)}function nt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rt(t){return rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},rt(t)}var ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$(t,e)}(a,t);var e,n,r,i=tt(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).state={options:t.options,values:[],enabledForward:!1},e.options=e.options.bind(nt(e)),e.clickHandler=e.clickHandler.bind(nt(e)),e.goForwardHandler=e.goForwardHandler.bind(nt(e)),e}return e=a,(n=[{key:"clickHandler",value:function(t){var e=this.state.values,n=e.indexOf(t);n>-1?e.splice(n,1):e.push(t);var r=e.length===parseInt(this.props.count);this.setState(X(X({},this.state),{},{values:e,enabledForward:r}))}},{key:"goForwardHandler",value:function(){this.props.goForwardHandler(this.state.values)}},{key:"options",value:function(){var t=this;return this.state.options.map((function(e,n){return o.createElement("div",{key:n,className:"tnc-q-form__option-wrapper"},e.img?o.createElement("img",{src:e.img,style:{maxHeight:"100px"},onClick:function(){return t.clickHandler(e.value,n)},className:"tnc-q-form__option-img "+(t.state.values.includes(e.value)?"tnc-q-form__option-img_selected":""),alt:"Task"}):o.createElement("button",{disabled:t.props.isLoading,onClick:function(){return t.clickHandler(e.value,n)},className:"tnc-btn tnc-q-form__option-btn "+(t.state.values.includes(e.value)?"tnc-q-form__option-btn_selected":"")},e.text))}))}},{key:"render",value:function(){return o.createElement("div",{className:"tnc-q__form tnc-q-form"},o.createElement("div",{className:"tnc-q-form__options"},this.options()),o.createElement(B,{isLoading:this.props.isLoading,enabledBack:this.props.enabledBack,enabledForward:this.state.enabledForward,goForwardHandler:this.goForwardHandler,goBackHandler:this.props.goBackHandler}))}}])&&W(e.prototype,n),r&&W(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ct(t,e){return ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ct(t,e)}function ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ft(t);if(e){var o=ft(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return st(this,n)}}function st(t,e){if(e&&("object"===it(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return lt(t)}function lt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ft(t){return ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ft(t)}var pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ct(t,e)}(a,t);var e,n,r,i=ut(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).state={values:[]},e.options=e.options.bind(lt(e)),e.onChange=e.onChange.bind(lt(e)),e}return e=a,(n=[{key:"onChange",value:function(t,e){var n=this.state.values;n[e]=t,this.setState({values:n})}},{key:"options",value:function(){var t=this;return this.props.options.map((function(e,n){var r;return o.createElement("div",{key:n,className:"tnc-q-form__option-wrapper"},o.createElement("input",{disabled:t.props.isLoading,onChange:function(e){return t.onChange(e.target.value,n)},placeholder:e.text,value:null!==(r=t.state.values[n])&&void 0!==r?r:"",className:"tnc-q-form__option-text"}))}))}},{key:"render",value:function(){var t=this;return o.createElement("div",{className:"tnc-q__form tnc-q-form"},o.createElement("div",{className:"tnc-q-form__options"},this.options()),o.createElement(B,{isLoading:this.props.isLoading,enabledBack:this.props.enabledBack,enabledForward:!0,goForwardHandler:function(){return t.props.selectionHandler(t.state.values)},goBackHandler:this.props.goBackHandler}))}}])&&at(e.prototype,n),r&&at(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dt(t,e){return dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},dt(t,e)}function bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wt(t);if(e){var o=wt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mt(this,n)}}function mt(t,e){if(e&&("object"===yt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return vt(t)}function vt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wt(t){return wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},wt(t)}var gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dt(t,e)}(a,t);var e,n,r,i=bt(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).state={options:e.props.options,values:[]},e.options=e.options.bind(vt(e)),e}return e=a,(n=[{key:"clickHandler",value:function(t,e){var n=this.state.values;n.push(t);var r=this.state.options;r.splice(e,1),this.setState({values:n,options:r}),0===r.length&&this.props.selectionHandler(n)}},{key:"options",value:function(){var t=this;return this.state.options.map((function(e,n){return o.createElement("div",{key:n,className:"tnc-q-form__option-wrapper"},o.createElement("button",{disabled:t.props.isLoading,onClick:function(){return t.clickHandler(e.value,n)},className:"tnc-btn tnc-q-form__option-btn"},e.text))}))}},{key:"render",value:function(){return o.createElement("div",{className:"tnc-q__form tnc-q-form"},o.createElement("div",{className:"tnc-q-form__options"},this.options()),o.createElement(B,{isLoading:this.props.isLoading,enabledBack:this.props.enabledBack,enabledForward:this.props.enabledForward,goForwardHandler:this.props.goForwardHandler,goBackHandler:this.props.goBackHandler}))}}])&&ht(e.prototype,n),r&&ht(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);function _t(t){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Et(t,e){return Et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Et(t,e)}function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Pt(t);if(e){var o=Pt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return St(this,n)}}function St(t,e){if(e&&("object"===_t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Tt(t)}function Tt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pt(t){return Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Pt(t)}var jt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Et(t,e)}(a,t);var e,n,r,i=kt(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).options=e.options.bind(Tt(e)),e}return e=a,(n=[{key:"name",value:function(t){return h(1===t||3===t?"Частично описывает меня":"Нейтрально")}},{key:"options",value:function(){var t=this;return this.props.options.map((function(e,n){return o.createElement("div",{key:n,className:"tnc-q-form__option-wrapper",onClick:function(){return t.props.selectionHandler(e.value)}},o.createElement("button",{disabled:t.props.isLoading,className:"tnc-btn tnc-q-form__option-btn"}),o.createElement("span",{className:"tnc-q-form__option-name"},0===n||4===n?e.text:t.name(n)))}))}},{key:"render",value:function(){return o.createElement("div",{className:"tnc-q__form tnc-q-form tnc-form-gradient"},o.createElement("div",{className:"tnc-form-gradient__compared"},o.createElement("div",{className:"tnc-form-gradient__compared-item"},this.props.options[0].text),o.createElement("div",{className:"tnc-form-gradient__compared-item"},this.props.options[this.props.options.length-1].text)),o.createElement("div",{className:"tnc-q-form__options"},this.options()),o.createElement("div",{className:"tnc-form-gradient__values"},o.createElement("div",{className:"tnc-form-gradient__values-item"},h("Точно описывает меня")),o.createElement("div",{className:"tnc-form-gradient__values-item"},h("Нейтрально")),o.createElement("div",{className:"tnc-form-gradient__values-item"},h("Точно описывает меня"))),o.createElement(B,{isLoading:this.props.isLoading,enabledBack:this.props.enabledBack,enabledForward:this.props.enabledForward,goForwardHandler:this.props.goForwardHandler,goBackHandler:this.props.goBackHandler}))}}])&&Ot(e.prototype,n),r&&Ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);function Rt(t){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rt(t)}function Nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function It(t,e){return It=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},It(t,e)}function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xt(t);if(e){var o=xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return At(this,n)}}function At(t,e){if(e&&("object"===Rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function xt(t){return xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},xt(t)}var qt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&It(t,e)}(a,t);var e,n,r,i=Ct(a);function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,t)}return e=a,(n=[{key:"render",value:function(){var t=100*(this.props.number-1)/this.props.length;return o.createElement("div",{className:"tnc-q__progress-bar tnc-q-progress-bar"},o.createElement("div",{className:"tnc-q-progress-bar__counters"},o.createElement("span",null,this.props.number),"/",o.createElement("span",null,this.props.length)),o.createElement("div",{className:"tnc-q-progress-bar__line-wrapper"},o.createElement("div",{className:"tnc-q-progress-bar__line",role:"progressbar",style:{width:t+"%"},"aria-valuenow":t,"aria-valuemin":t,"aria-valuemax":"100"})))}}])&&Nt(e.prototype,n),r&&Nt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function Lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Dt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Lt(Object(n),!0).forEach((function(e){Bt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ft(t,e){return Ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ft(t,e)}function Qt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yt(t);if(e){var o=Yt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Mt(this,n)}}function Mt(t,e){if(e&&("object"===Ht(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zt(t)}function zt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yt(t){return Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Yt(t)}var Kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ft(t,e)}(a,t);var e,n,r,i=Qt(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).interval=null,e.state={timer:t.timer>0?t.timer:null,timeOut:!1},e.timeOut=e.timeOut.bind(zt(e)),e}return e=a,(n=[{key:"componentDidMount",value:function(){if(this.state.timer){console.log("timer",this.state.timer);var t=this;this.interval=setInterval((function(){t.state.timer>1?t.setState(Dt(Dt({},t.state),{},{timer:t.state.timer-1})):(clearInterval(t.interval),t.timeOut())}),1e3)}}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"timeOut",value:function(){console.log("timeout"),this.setState(Dt(Dt({},this.state),{},{timeOut:!0}))}},{key:"render",value:function(){return this.state.timeOut?o.createElement("div",null,o.createElement("p",null,h("Закончилось время, отведённое на вопрос")," (",this.props.timer," ",h("секунд"),").",h("Нажмите кнопку продолжить, когда будете готовы продолжить тест.")),o.createElement("button",{onClick:this.props.goForwardHandler,className:"btn btn-primary"},h("Продолжить"))):this.props.children}}])&&Ut(e.prototype,n),r&&Ut(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(o.Component);function Gt(t){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gt(t)}function Zt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(n),!0).forEach((function(e){Jt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Jt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $t(t,e){return $t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},$t(t,e)}function te(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=re(t);if(e){var o=re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ee(this,n)}}function ee(t,e){if(e&&("object"===Gt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ne(t)}function ne(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function re(t){return re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},re(t)}var oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$t(t,e)}(p,t);var e,n,r,s,l,f=te(p);function p(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(e=f.call(this,t)).qm=t.qm,e.am=t.am,e.state={active:!1,isLoading:!0,error:null,question:null,opacity:0};var n={};return n[i.QUESTION_TYPE_OPTION]=G,n[i.QUESTION_TYPE_CHECKBOX]=ot,n[i.QUESTION_TYPE_TEXT]=pt,n[i.QUESTION_TYPE_RATING]=gt,n[i.QUESTION_TYPE_GRADIENT]=jt,e.formTypeMap=n,e.save=e.save.bind(ne(e)),e.goForwardHandler=e.goForwardHandler.bind(ne(e)),e.goBackHandler=e.goBackHandler.bind(ne(e)),e.trigger=e.trigger.bind(ne(e)),e.animateInterval=null,e}return e=p,n=[{key:"componentDidMount",value:function(){this.props.task===i.RESTORE_QUIZ_COMMAND?this.next():this.start()}},{key:"trigger",value:function(t){this.props.dispatcher.dispatchEvent(t)}},{key:"start",value:function(){var t=this;this.setState(Xt(Xt({},this.state),{},{isLoading:!0})),this.am.clear(),this.qm.first().then((function(e){t.afterQuestionLoad(e)}))}},{key:"next",value:function(){var t=this;this.setState(Xt(Xt({},this.state),{},{isLoading:!0})),this.am.last().then((function(e){t.qm.next(e.questionId).then((function(e){t.afterQuestionLoad(e)}))}))}},{key:"prev",value:function(){var t=this;this.setState(Xt(Xt({},this.state),{},{isLoading:!0})),this.qm.prev(this.state.question.id).then((function(e){t.afterQuestionLoad(e)}))}},{key:"afterQuestionLoad",value:function(t){this.setState(Xt(Xt({},this.state),{},{isLoading:!1,question:t,opacity:0,active:!1})),this.trigger(new CustomEvent(c,{detail:{number:t.number,target:this}}))}},{key:"goForwardHandler",value:function(){return this.save(null)}},{key:"goBackHandler",value:function(){this.prev()}},{key:"fadeIn",value:function(){this.animateInterval&&clearInterval(this.animateInterval);var t=this;this.animateInterval=setInterval((function(){t.state.opacity>=1&&clearInterval(t.animateInterval),t.setState(Xt(Xt({},t.state),{},{opacity:t.state.opacity+.05}))}),10)}},{key:"save",value:(s=regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.am.add(this.state.question.id,e),this.trigger(new CustomEvent(u,{detail:{target:this,number:this.state.question.number}}));case 2:case"end":return t.stop()}}),t,this)})),l=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=s.apply(t,e);function i(t){Zt(o,n,r,i,a,"next",t)}function a(t){Zt(o,n,r,i,a,"throw",t)}i(void 0)}))},function(t){return l.apply(this,arguments)})},{key:"continueQuiz",value:function(){this.state.question.number>=this.props.quizLength?this.trigger(new CustomEvent(a,{detail:{number:this.state.question.number}})):this.next()}},{key:"renderQuiz",value:function(){this.setState(Xt(Xt({},this.state),{},{active:!0})),this.fadeIn()}},{key:"render",value:function(){if(!this.state.active)return null;if(this.state.error)return this.state.error;if(null===this.state.question)return null;var t=this.state.question,e=t.options,n=t.type.get(),r=t.enabledForward&&t.number<t.length,i=t.enabledBack&&t.number>1,a=this.formTypeMap[n];return o.createElement("section",{className:"tnc-q-wrapper"},o.createElement("article",{className:"tnc-q tnc-q__"+this.props.testId+"-"+t.id},o.createElement("div",{className:"container"},o.createElement("div",{className:"tnc-q-inner",style:{opacity:this.state.opacity}},o.createElement(Kt,{timer:t.timer,goForwardHandler:this.goForwardHandler,key:t.id},t.img?o.createElement("img",{className:"tnc-q__img",src:t.img,alt:h("Задание")}):null,o.createElement("h2",{className:"tnc-q__name"},t.name),t.text?o.createElement("div",{className:"tnc-q__text",dangerouslySetInnerHTML:{__html:t.text}}):null,o.createElement(a,{key:t.id,options:e,count:t.count,isLoading:this.state.isLoading,enabledBack:i,enabledForward:r,selectionHandler:this.save,goForwardHandler:this.goForwardHandler,goBackHandler:this.goBackHandler}),o.createElement(qt,{length:t.length,number:t.number}))))))}}],n&&Wt(e.prototype,n),r&&Wt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),p}(o.Component);function ie(t){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(t)}function ae(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ce(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ae(Object(n),!0).forEach((function(e){ue(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function se(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fe(t,e){return fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},fe(t,e)}function pe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=he(t);if(e){var o=he(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ye(this,n)}}function ye(t,e){if(e&&("object"===ie(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function he(t){return he=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},he(t)}var de=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fe(t,e)}(u,t);var e,n,r,i,a,c=pe(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=c.call(this,t)).api=t.api,e.state={error:null,isLoading:!0,result:null},e}return e=u,n=[{key:"componentDidMount",value:(i=regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.resultKey();case 2:e=t.sent,this.api.result().then((function(t){n.setState(ce(ce({},n.state),{},{isLoading:!1,key:e,result:t.data}))})).catch((function(t){t.response&&console.error(t.response.data.detail),console.error(t),n.setState(ce(ce({},n.state),{},{isLoading:!1,error:h("Произошла ошибка во время загрузки результата.")}))}));case 4:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){se(o,n,r,a,c,"next",t)}function c(t){se(o,n,r,a,c,"throw",t)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"render",value:function(){if(this.state.isLoading)return o.createElement("div",{className:"container"},h("Загрузка результата..."));if(this.state.error)return o.createElement("div",{className:"container"},this.state.error);var t="https://testonomica.com/tests/result/"+this.state.key+"/";return o.createElement("div",{className:"tnc-result"},o.createElement("div",{className:"container"},o.createElement("h1",{className:"tnc-result__title"},this.props.test.name),o.createElement("h2",{className:"tnc-result__subtitle"},h("Ваши результаты"),":"),o.createElement("article",{className:"tnc-result__text",dangerouslySetInnerHTML:{__html:this.state.result}}),o.createElement("p",null,o.createElement("span",{style:{fontWeight:"bold"}},h("Постоянная ссылка на результат"),":"),o.createElement("br",null),o.createElement("a",{href:t},t)),o.createElement("button",{onClick:this.props.restartClickHandler,className:"tnc-btn tnc-result__btn-restart"},h("Пройти тест заново"))))}}],n&&le(e.prototype,n),r&&le(e,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(o.Component);function be(t){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(t)}function me(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function ve(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function we(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ve(Object(n),!0).forEach((function(e){ge(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ge(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oe(t,e){return Oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Oe(t,e)}function Ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Te(t);if(e){var o=Te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ke(this,n)}}function ke(t,e){if(e&&("object"===be(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Se(t)}function Se(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Te(t){return Te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Te(t)}var Pe="welcome",je="instruction",Re="quiz",Ne="result",Ie=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oe(t,e)}(c,t);var e,n,r,a=Ee(c);function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this,t)).config=t.config,e.content=t.content,e.state={status:null,screen:null,quizTask:null},e.dispatcher=t.dispatcher,e.startClickHandler=e.startClickHandler.bind(Se(e)),e.restartClickHandler=e.restartClickHandler.bind(Se(e)),e.restoreClickHandler=e.restoreClickHandler.bind(Se(e)),e.instructionDoneClickHandler=e.instructionDoneClickHandler.bind(Se(e)),e.start=e.start.bind(Se(e)),e}return e=c,n=[{key:"trigger",value:function(t){this.dispatcher&&this.dispatcher.dispatchEvent(t)}},{key:"startClickHandler",value:function(){this.trigger(new CustomEvent(s))}},{key:"restartClickHandler",value:function(){this.trigger(new CustomEvent(l))}},{key:"restoreClickHandler",value:function(){this.setState(we(we({},this.state),{},{screen:Re,quizTask:i.RESTORE_QUIZ_COMMAND}))}},{key:"start",value:function(){this.props.test.instruction?this.setState(we(we({},this.state),{},{screen:je})):this.setState(we(we({},this.state),{},{screen:Re,quizTask:i.START_QUIZ_COMMAND}))}},{key:"instructionDoneClickHandler",value:function(){this.setState(we(we({},this.state),{},{screen:Re,quizTask:i.START_QUIZ_COMMAND}))}},{key:"componentDidMount",value:function(){var t=this;this.trigger(new CustomEvent("loaded")),this.props.am.status().then(function(){var e,n=(e=regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.config.startScreen===i.START_SCREEN_RESTORE?t.setState(we(we({},t.state),{},{screen:Re,quizTask:i.RESTORE_QUIZ_COMMAND})):t.config.startScreen===i.START_SCREEN_START?t.setState(we(we({},t.state),{},{screen:Re,quizTask:i.START_QUIZ_COMMAND})):n===i.STATUS_FINISHED&&t.config.isShowResultAfterLoad()?t.setState(we(we({},t.state),{},{status:n,screen:Ne})):t.setState(we(we({},t.state),{},{status:n,screen:Pe}));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(t){me(i,r,o,a,c,"next",t)}function c(t){me(i,r,o,a,c,"throw",t)}a(void 0)}))});return function(t){return n.apply(this,arguments)}}())}},{key:"render",value:function(){var t=this;return o.createElement("div",{id:"tnc",className:"tnc"},this.state.screen===Pe&&o.createElement(k,{test:this.props.test,status:this.state.status,startScreenConfig:this.config.getStartScreen(),content:this.content,startClickHandler:this.startClickHandler,restartClickHandler:this.restartClickHandler,restoreClickHandler:this.restoreClickHandler}),this.state.screen===je&&o.createElement(C,{test:this.props.test,startClickHandler:this.instructionDoneClickHandler}),this.state.screen===Re&&(this.quiz=o.createElement(oe,{testId:this.props.test.id,quizLength:this.props.test.length,qm:this.props.qm,am:this.props.am,dispatcher:this.dispatcher,task:this.state.quizTask})),this.state.screen===Ne&&(t.config.isDisplayReport()?o.createElement(de,{api:t.api,test:t.props.test,restartClickHandler:t.restartClickHandler}):o.createElement("div",{className:"container"},o.createElement("i",null,h("Результат обрабатывается...")))))}}],n&&_e(e.prototype,n),r&&_e(e,r),Object.defineProperty(e,"prototype",{writable:!1}),c}(o.Component),Ce=(n(3195),n(4773)),Ae=n.n(Ce);n(9108);function xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qe(t,e,n){return e&&xe(t.prototype,e),n&&xe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var He=qe((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.id,this.name=e.name,this.text=e.text,this.img=e.img,this.type=e.type,this.count=e.count,this.timer=e.timer,this.enabledBack=e.enabledBack,this.enabledForward=e.enabledForward,this.number=e.number,this.length=e.length,this.options=e.options}));function Le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function De(t,e,n){return e&&Le(t.prototype,e),n&&Le(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var Be=De((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=e.value,this.text=e.text,this.img=e.img}));function Ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Fe=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),![i.QUESTION_TYPE_OPTION,i.QUESTION_TYPE_CHECKBOX,i.QUESTION_TYPE_TEXT,i.QUESTION_TYPE_RATING,i.QUESTION_TYPE_GRADIENT].includes(e)){var n="Unknown question type: "+e;throw console.error(n),new Error(n)}this.value=e}var e,n,r;return e=t,(n=[{key:"get",value:function(){return this.value}}])&&Ue(e.prototype,n),r&&Ue(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Me=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"hydrate",value:function(t){var e=new Fe(t.data.question.type);Object.freeze(e);var n=t.data.question.items.map((function(t){return new Be({value:t.value,text:t.text,img:t.img})})),r=new He({id:t.data.question.id,name:t.data.question.name,text:t.data.question.text,img:t.data.question.img,enabledBack:t.data.question.enabledBack,enabledForward:t.data.question.enabledForward,count:parseInt(t.data.question.count),timer:parseInt(t.data.question.timer),number:t.data.number,length:t.data.length,type:e,options:n});return Object.freeze(r),r}}])&&Qe(e.prototype,n),r&&Qe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ye=function(){function t(e,n,r,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.description=n,this.price=r,this.count=o,this.sum=i}var e,n,r;return e=t,r=[{key:"createImmutable",value:function(e,n,r,o,i){var a=new t(e,n,r,o,i);return Object.freeze(this),a}}],(n=null)&&ze(e.prototype,n),r&&ze(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ke(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Ge(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Ke(i,r,o,a,c,"next",t)}function c(t){Ke(i,r,o,a,c,"throw",t)}a(void 0)}))}}function Ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ve=function(){function t(e,n,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new Error("testId must be defined.");this.testId=e,this.host=(null!=n?n:i.HOST)+("en"===p()?"/en":""),this.token=r,this.test=null}var e,n,r,o,a,c;return e=t,n=[{key:"hasAccess",value:function(){var t={method:"get",url:this.host+"/access/has/",responseType:"json"};return this.token&&(t.headers={token:this.token}),Ae()(t).then((function(t){return t.data.status}))}},{key:"grand",value:function(){var t=this;return Ae()(this.tokenizedRequest({method:"get",url:this.host+"/access/grand/",responseType:"json"})).then((function(e){return t.token=e.data.token,!0}))}},{key:"getOrder",value:function(){return Ae()(this.tokenizedRequest({method:"get",url:this.host+"/access/order/",responseType:"json"})).then((function(t){var e=t.data.order;return new Ye(e.id,e.description,e.price,e.count,e.sum)}))}},{key:"description",value:function(){var t=this;return Ae()({method:"get",url:this.buildUrl("/info/".concat(this.testId,"/")),responseType:"json"}).then((function(e){return t.test={id:t.testId,name:e.data.name,description:e.data.description,instruction:e.data.instruction,authors:e.data.authors,duration:e.data.duration,length:e.data.length,paid:e.data.paid},t.test}))}},{key:"firstQuestion",value:(c=Ge(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Ae()(this.tokenizedRequest({method:"get",url:this.buildUrl("/first/"+this.testId+"/"),responseType:"json"})).then((function(t){return e.token=t.headers["x-token"],(new Me).hydrate(t)})));case 1:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"nextQuestion",value:(a=Ge(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Ae()(this.tokenizedRequest({method:"get",url:this.buildUrl("/next/"+this.testId+"/?q="+e),responseType:"json"})).then((function(t){return n.token=t.headers["x-token"],(new Me).hydrate(t)})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"prevQuestion",value:(o=Ge(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Ae()(this.tokenizedRequest({method:"get",url:this.buildUrl("/prev/"+this.testId+"/?q="+e),responseType:"json"})).then((function(t){return n.token=t.headers["x-token"],(new Me).hydrate(t)})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"buildUrl",value:function(t){return"".concat(this.host,"/tests/api/v1").concat(t)}},{key:"tokenizedRequest",value:function(t){return this.token&&(t.headers={token:this.token}),t}}],n&&Ze(e.prototype,n),r&&Ze(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();n(7073);function Xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Je=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listeners={}}var e,n,r;return e=t,(n=[{key:"addEventListener",value:function(t,e){this.listeners[t]&&Array.isArray(this.listeners[t])||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"clearEventListeners",value:function(t){delete this.listeners[t]}},{key:"dispatchEvent",value:function(t){if(this.listeners[t.type])for(var e in this.listeners[t.type])this.listeners[t.type][e](t.detail)}}])&&Xe(e.prototype,n),r&&Xe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function We(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $e=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.testId=t.confTestId(e),this.host=t.confHost(e),this.token=t.confToken(e),this.init=t.confInit(e),this.startScreen=t.confStartScreen(e),this.displayReport=t.confDisplayReport(e),this.showResultAfterLoad=t.confShowResultAfterLoad(e)}var e,n,r;return e=t,r=[{key:"confTestId",value:function(e){return t.textValue("testId",e.testId)}},{key:"confHost",value:function(e){return t.textValue("host",e.host)}},{key:"confToken",value:function(t){return t.token}},{key:"confInit",value:function(e){return t.textValue("init",e.init,[i.INIT_AUTO,i.INIT_MANUAL])}},{key:"confStartScreen",value:function(e){return t.textValue("startScreen",e.startScreen,[i.START_SCREEN_API,i.START_SCREEN_LIVE,i.START_SCREEN_START,i.START_SCREEN_RESTORE],i.START_SCREEN_API)}},{key:"confDisplayReport",value:function(e){return!e.hasOwnProperty("displayReport")||t.isTrue(e.displayReport)}},{key:"confShowResultAfterLoad",value:function(e){return!e.hasOwnProperty("showResultAfterLoad")||t.isTrue(e.showResultAfterLoad)}},{key:"isTrue",value:function(t){return!0===t||"true"===t||"1"===t||1===t}},{key:"textValue",value:function(t,e,n,r){if(!e){if(r)return r;throw new Error("InvalidArgumentException: missing config property ".concat(t,"."))}if(n){if(n.includes(e))return e;throw new Error("InvalidArgumentException: config param ".concat(t,' contains unsupported value "').concat(e,'".'))}return e}}],(n=[{key:"getTestId",value:function(){return this.testId}},{key:"getHost",value:function(){return this.host}},{key:"getInit",value:function(){return this.init}},{key:"getToken",value:function(){return this.token}},{key:"isDisplayReport",value:function(){return this.displayReport}},{key:"isShowResultAfterLoad",value:function(){return this.showResultAfterLoad}},{key:"getStartScreen",value:function(){return this.startScreen}}])&&We(e.prototype,n),r&&We(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function tn(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function en(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){tn(i,r,o,a,c,"next",t)}function c(t){tn(i,r,o,a,c,"throw",t)}a(void 0)}))}}function nn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var rn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.api=e}var e,n,r,o,i,a;return e=t,n=[{key:"first",value:(a=en(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.api.firstQuestion().then((function(t){return t})));case 1:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"next",value:(i=en(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.api.nextQuestion(e).then((function(t){return t})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"prev",value:(o=en(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.api.prevQuestion(e).then((function(t){return t})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})}],n&&nn(e.prototype,n),r&&nn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),on=n(2863);function an(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var cn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storage=e}var e,n,r;return e=t,(n=[{key:"add",value:function(t,e){this.storage.addAnswer(on.default.createImmutable(t,e))}},{key:"last",value:function(){return this.storage.getLastAnswer()}},{key:"getAll",value:function(){return this.storage.getAnswers()}},{key:"clear",value:function(){this.storage.clear()}},{key:"status",value:function(){return this.storage.getStatus()}}])&&an(e.prototype,n),r&&an(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var sn=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.api=new Ve(n,r,o),this.am=new cn(e),this.qm=new rn(this.api),this.dispatcher=new Je,this.setDefaultBehaviour()}var e,n,i;return e=t,n=[{key:"createApp",value:function(t,e){var n=this;this.api.description().then((function(i){var a=o.createElement(Ie,{test:i,qm:n.qm,am:n.am,config:e,content:t.innerHTML,dispatcher:n.dispatcher});n.app=r.render(a,t)}))}},{key:"setDefaultBehaviour",value:function(){var t=this;this.dispatcher.addEventListener(a,(function(){})),this.dispatcher.addEventListener(u,(function(t){t.target.continueQuiz()})),this.dispatcher.addEventListener(c,(function(t){t.target.renderQuiz()})),this.dispatcher.addEventListener(s,(function(e){t.start()})),this.dispatcher.addEventListener(l,(function(e){t.start()}))}},{key:"start",value:function(){this.app.start()}},{key:"status",value:function(){return this.am.status()}},{key:"addEventListener",value:function(t,e){this.dispatcher.addEventListener(t,e)}},{key:"clearEventListeners",value:function(t){this.dispatcher.clearEventListeners(t)}}],n&&un(e.prototype,n),i&&un(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var ln=n(6024),fn=n.n(ln),pn=n(263),yn=n(5217);function hn(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function dn(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){hn(i,r,o,a,c,"next",t)}function c(t){hn(i,r,o,a,c,"throw",t)}a(void 0)}))}}function bn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(0,pn.ZF)({apiKey:"AIzaSyAxhWpbBwpTvc2V6LzaUJA1P_TOen32Eck",authDomain:"testonomica.firebaseapp.com",projectId:"testonomica",storageBucket:"testonomica.appspot.com",messagingSenderId:"284531372526",appId:"1:284531372526:web:034f85dfbf4449db4edeff",measurementId:"G-6MZ0WZNF88"});var mn=(0,yn.ad)(),vn=null,wn=null,gn=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.answersRef=(0,yn.JU)(mn,"users/sid_".concat(n,"/test_").concat(e),"answers"),this.statusRef=(0,yn.JU)(mn,"users/sid_".concat(n,"/test_").concat(e),"state")}var e,n,r,o,a,c,u,s;return e=t,n=[{key:"resultKey",value:(s=dn(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!wn){t.next=3;break}return console.log("resultKey: from cache"),t.abrupt("return",wn);case 3:return t.next=5,(0,yn.QT)(this.statusRef);case 5:if(!(e=t.sent).exists()||!e.data().resultKey){t.next=9;break}return wn=e.data().resultKey,t.abrupt("return",wn);case 9:return t.abrupt("return",null);case 10:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"clear",value:function(){var t=this;return console.log("clear"),(0,yn.pl)(this.answersRef,{}).then((function(){return(0,yn.pl)(t.statusRef,{})}))}},{key:"addAnswer",value:function(t){var e={};return e[t.questionId]=t.value,(0,yn.r7)(this.answersRef,e).then((function(){vn=null}))}},{key:"getAnswers",value:(u=dn(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!vn){t.next=3;break}return console.log("answers: from cache"),t.abrupt("return",vn);case 3:return t.next=5,(0,yn.QT)(this.answersRef);case 5:if(!(e=t.sent).exists()){t.next=11;break}return vn=e.data(),t.abrupt("return",vn);case 11:return t.abrupt("return",{});case 12:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"getLastAnswer",value:(c=dn(regeneratorRuntime.mark((function t(){var e,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAnswers();case 2:return e=t.sent,n=Object.keys(e),r=n[n.length-1],o=e[r],t.abrupt("return",on.default.createImmutable(r,o));case 7:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"getLength",value:(a=dn(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAnswers();case 2:return e=t.sent,t.abrupt("return",Object.keys(e).length);case 4:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"getStatus",value:(o=dn(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.resultKey();case 2:if(!t.sent){t.next=5;break}return t.abrupt("return",i.STATUS_FINISHED);case 5:return t.next=7,this.getLength();case 7:if(!(t.sent>0)){t.next=12;break}return t.abrupt("return",i.STATUS_IN_PROGRESS);case 12:return t.abrupt("return",i.STATUS_NONE);case 13:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"setFinished",value:function(t){return(0,yn.r7)(this.statusRef,{resultKey:t})}}],n&&bn(e.prototype,n),r&&bn(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),_n=(n(1539),n(8674),n(2222),n(9755)),On=n.n(_n);function En(t){return{saveProgress:function(e){return new Promise((function(n){On().post({url:"/tests/api/v1/save/".concat(t,"/"),data:{testId:t,progress:e}}).then((function(t){n(t.key)})).fail((function(){alert("Не удалось сохранить прогресс.")}))}))},getResultByKey:function(e){return new Promise((function(n){On().get({url:"/tests/api/v1/result/".concat(t,"/?key=").concat(e)}).then((function(t){n(t)})).fail((function(){n(null)}))}))}}}function kn(){return document.documentElement.lang}var Sn,Tn=document.getElementById("testonomica_app"),Pn=function(t){var e,n,r,o,a,c,u=t.getAttribute("data-test");if(!u)throw new Error("tag must include attribute: data-test");return new $e({testId:u,host:null!==(e=t.getAttribute("data-host"))&&void 0!==e?e:i.HOST,token:null!==(n=t.getAttribute("data-token"))&&void 0!==n?n:null,init:null!==(r=t.getAttribute("data-init"))&&void 0!==r?r:i.INIT_AUTO,startScreen:null!==(o=t.getAttribute("data-start-screen"))&&void 0!==o?o:i.START_SCREEN_API,displayReport:null===(a=t.getAttribute("data-display-report"))||void 0===a||a,showResultAfterLoad:null===(c=t.getAttribute("data-show-result-after-load"))||void 0===c||c})}(Tn),jn=null;if((Sn=navigator.cookieEnabled)||(document.cookie="testcookie",Sn=-1!==document.cookie.indexOf("testcookie")),Sn)jn=new(fn())(Pn.getTestId());else{var Rn=Tn.getAttribute("data-sid");if(!Rn)throw Error("Error: sid has to be specified.");jn=new gn(Pn.getTestId(),Rn)}window.testonomica=new sn(jn,Pn.getTestId(),Pn.getHost(),Pn.getToken()),window.testonomica.addEventListener(a,(function(){var t=new En(Pn.getTestId());jn.getAnswers().then((function(e){return t.saveProgress(e)})).then((function(t){var e;jn.clear(),window.location.href=(e="/tests/result/".concat(t,"/"),"en"===kn()?("/"===e.charAt(0)&&(e=e.substring(1)),"/en/"+e):e)}))})),Pn.getInit()===i.INIT_AUTO&&window.testonomica.createApp(Tn,Pn)},1559:(t,e,n)=>{n(2480),Object.defineProperty(e,"__esModule",{value:!0}),e.HOST=e.QUESTION_TYPE_GRADIENT=e.QUESTION_TYPE_RATING=e.QUESTION_TYPE_TEXT=e.QUESTION_TYPE_CHECKBOX=e.QUESTION_TYPE_OPTION=e.RESTORE_QUIZ_COMMAND=e.START_QUIZ_COMMAND=e.STATUS_FINISHED=e.STATUS_IN_PROGRESS=e.STATUS_NONE=e.START_SCREEN_RESTORE=e.START_SCREEN_START=e.START_SCREEN_LIVE=e.START_SCREEN_API=e.INIT_MANUAL=e.INIT_AUTO=void 0,e.INIT_AUTO="auto",e.INIT_MANUAL="manual",e.START_SCREEN_API="api",e.START_SCREEN_LIVE="live",e.START_SCREEN_START="start",e.START_SCREEN_RESTORE="restore",e.STATUS_NONE=0,e.STATUS_IN_PROGRESS=1,e.STATUS_FINISHED=2,e.START_QUIZ_COMMAND="start",e.RESTORE_QUIZ_COMMAND="restore",e.QUESTION_TYPE_OPTION="option",e.QUESTION_TYPE_CHECKBOX="checkbox",e.QUESTION_TYPE_TEXT="text",e.QUESTION_TYPE_RATING="rating",e.QUESTION_TYPE_GRADIENT="gradient",e.HOST="https://testonomica.com"},6024:function(t,e,n){n(233),n(5821),n(4832),n(6424),n(3859),n(662),n(1504),n(6854),n(2480),n(7073),n(1945),n(9973),n(8258);var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(1559),c=i(n(2863)),u=function(){function t(t){this.storageName="testonomica_test_"+t,window.localStorage.getItem(this.storageName)?Array.isArray(this._getStorageData().answers)||(console.log("Формат хранилища изменился в новой версии, поэтому прогресс был обнулён."),this._initLocalStorage()):this._initLocalStorage()}return t.prototype.resultKey=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,this._getStorageData().resultKey]}))}))},t.prototype.clear=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return this._initLocalStorage(),[2]}))}))},t.prototype.import=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){return this._updateField("answers",Array.from(t.get().entries())),[2]}))}))},t.prototype.addAnswer=function(t){return r(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){return e=this._getStorageData(),(n=new Map(e.answers)).set(t.questionId,t.value),this._updateField("answers",Array.from(n.entries())),[2]}))}))},t.prototype.getAnswers=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,this._getStorageData().answers]}))}))},t.prototype.getLastAnswer=function(){return r(this,void 0,void 0,(function(){var t,e,n;return o(this,(function(r){return t=this._getStorageData(),e=new Map(t.answers),(n=Array.from(e.entries()).pop())?[2,c.default.createImmutable(n[0],n[1])]:[2,null]}))}))},t.prototype.getLength=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,Object.keys(this._getStorageData().answers).length]}))}))},t.prototype.getStatus=function(){return r(this,void 0,void 0,(function(){var t;return o(this,(function(e){return(t=this._getStorageData()).resultKey?[2,a.STATUS_FINISHED]:Object.keys(t.answers).length>0?[2,a.STATUS_IN_PROGRESS]:[2,a.STATUS_NONE]}))}))},t.prototype.setFinished=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){return this._updateField("resultKey",t),[2]}))}))},t.prototype._getStorageData=function(){var t;return JSON.parse(null!==(t=window.localStorage.getItem(this.storageName))&&void 0!==t?t:"")},t.prototype._initLocalStorage=function(){var t=JSON.stringify({resultKey:null,answers:[]});window.localStorage.setItem(this.storageName,t)},t.prototype._updateField=function(t,e){var n=this._getStorageData();n[t]=e,this._update(n)},t.prototype._update=function(t){window.localStorage.setItem(this.storageName,JSON.stringify(t))},t}();e.default=u},2863:(t,e,n)=>{n(2480),n(9108),Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.questionId=t,this.value=e}return t.createImmutable=function(e,n){var r=new t(e,n);return Object.freeze(this),r},t}();e.default=r}},t=>{t.O(0,[865,767],(()=>{return e=4954,t(t.s=e);var e}));t.O()}]);