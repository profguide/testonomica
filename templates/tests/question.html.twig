{% block body %}
    <style>
        /*#testonomica_header {*/
        /*    display: none;*/
        /*}*/

        /*#testonomica_test__ajax-screen {*/
        /*    position: absolute;*/
        /*    top: 0;*/
        /*    bottom: 0;*/
        /*    left: 0;*/
        /*    right: 0;*/
        /*}*/
    </style>
    <script>
        window.question = new window.TestContext({{ count }}, {{ progress }}, {{ question.showAnswer ? 'true' : 'false' }}, {{ question.correct ? ("'#{question.correct}'"|raw) : 'null' }}, {{ question.wrong ? ("'#{question.wrong}'"|raw) : 'null' }});
    </script>
    <form method="post" class="test__question-form">
        <input type="hidden" name="test" value="{{ test.id }}"/>
        <input type="hidden" class="question" name="question" value="{{ question.id }}"/>
        <input type="hidden" name="timer" value="">
        <article class="test__question-content">
            <div class="test__quiz test__quiz_{{ question.type|lower }}">
                <div class="container">
                    <div class="test__quiz-content">
                        {% if question.img %}
                            <div class="test__img-wrapper">
                                <img class="test__img" src="{{ question.img }}" alt="{{ question.name }}"/>
                            </div>
                        {% endif %}
                        <div class="test__name">{{ question.name }}</div>
                        {% if question.text %}
                            <div class="test__text">{{ question.text|raw }}</div>
                        {% endif %}
                        <div class="test__options_holder">
                            {% if question.type == 'option' %}
                                {% for item in question.items %}
                                    <div class="test__option">
                                        <input type="radio"
                                               name="answer"
                                               value="{{ item.value }}"
                                               id="answer-{{ loop.index }}"
                                               class="radio"
                                               data-is-correct="{{ item.correct }}">
                                        <label for="answer-{{ loop.index }}">
                                            {% if item.img %}
                                                <img src="{{ item.img }}" class="test__option-img" alt="Вариант"/>
                                            {% else %}
                                                {{ item.text|raw }}
                                            {% endif %}
                                        </label>
                                        <div class="test__option-reveal"></div>
                                    </div>
                                {% endfor %}
                            {% elseif question.type == 'text' %}
                                {% for item in question.items %}
                                    <div class="test__option">
                                        <input type="text"
                                               name="answer"
                                               id="answer-{{ loop.index }}"
                                               data-method="TEXT"
                                               placeholder="{% if item.text %}{{ item.text }}{% endif %}"
                                               class="form-control">
                                    </div>
                                {% endfor %}
                            {% elseif question.type == 'checkbox' %}
                                {% for item in question.items %}
                                    <div class="test__option">
                                        <input type="checkbox"
                                               name="answer"
                                               value="{{ item.value }}"
                                               id="answer-{{ loop.index }}"
                                               data-method="CHECKBOX"
                                               data-limit="{{ question.count }}"
                                               class="checkbox">
                                        <label for="answer-{{ loop.index }}">
                                            {% if item.img %}
                                                <img src="{{ item.img }}" class="test__option-img" alt="Вариант"/>
                                            {% else %}
                                                {{ item.text|raw }}
                                            {% endif %}
                                        </label>
                                    </div>
                                {% endfor %}
                            {% elseif question.type == 'rating' %}
                                {% for item in question.items %}
                                    <div class="test__option">
                                        <input type="radio"
                                               name="answer"
                                               value="{{ item.value }}"
                                               id="answer-{{ loop.index }}"
                                               data-method="RATING"
                                               class="radio">
                                        <label for="answer-{{ loop.index }}">
                                            {% if item.img %}
                                                <img src="{{ item.img }}" class="test__option-img" alt="Вариант"/>
                                            {% else %}
                                                {{ item.text|raw }}
                                            {% endif %}
                                        </label>
                                    </div>
                                {% endfor %}
                            {% endif %}
                        </div>
                        <div class="test__btn-row" id="test-question-btn-row">
                            <button class="test__btn-direct btn btn-light {% if question.enabledBack and progress > 1 %}test__btn-direct_forced{% endif %}"
                                    id="test-question-back-btn"><span class="material-icons">arrow_back</span></button>
                            <button class="test__btn-direct btn btn-light {% if question.enabledForward or question.type == 'text' %}test__btn-direct_forced{% endif %}"
                                    id="test-question-next-btn"><span class="material-icons">arrow_forward</span></button>
                        </div>
                    </div>
                    <div class="test__top-inner">
                        <div class="test__progress-counter">
                            <span class="of">{{ progress }}</span>/<span class="out">{{ count }}</span>
                        </div>
                        <div class="test__progress_line progress">
                            <div class="progress-bar progress-bar-striped"
                                 role="progressbar"
                                 style="width: {{ percent }}%"
                                 aria-valuenow="{{ percent }}"
                                 aria-valuemin="0"
                                 aria-valuemax="100">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </article>
    </form>
{% endblock %}