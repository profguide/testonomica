{% extends('tests/result.html.twig') %}

{% block result %}
    <div class="container">
        <h3>Профессии:</h3>
        <ul>
            {% for name, value in professions %}
                <li>{{ name }}: {{ value }}</li>
            {% endfor %}
        </ul>
        <hr/>
        <h3>DEBUG</h3>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <div class="card card-body alert-success">
            <h4>Топовые типы</h4>
            <ol>
                {% for name, value in types_top %}
                    <li>{{ name }}: {{ value }}%</li>
                {% endfor %}
            </ol>
        </div>
        <div class="card card-body mt-4">
            <h4>Типы со сгруппированными значениями</h4>
            <script type="text/javascript">
                google.charts.load("current", {packages: ['corechart']});
                google.charts.setOnLoadCallback(drawChart);
                function drawChart() {
                    var data = google.visualization.arrayToDataTable([
                        ['Тип', 'Значение'],
                        {% for name, value in types_single_percent %}
                        ['{{ name }}', {{ value }}],
                        {% endfor %}
                    ]);
                    var options = {
                        title: "Типы со сгруппированными значениями, в %",
                        width: '100%',
                        height: 600,
                        bar: {groupWidth: '80%'},
                        legend: {position: 'none'},
                    };
                    var chart = new google.visualization.ColumnChart(document.getElementById('all_types'));
                    chart.draw(data, options);
                }
            </script>
            <ol class="mt-3">
                {% for name, value in types_single_percent %}
                    <li>{{ name }}: {{ value }}%</li>
                {% endfor %}
            </ol>
            <div id="all_types"></div>
        </div>
        <div class="card card-body mt-4">
            <h4>Типы и значения по группам</h4>
            <table class="table">
                <tr>
                    <th>Тип</th>
                    <th>Усилия</th>
                    <th>Интерес</th>
                    <th>Способности</th>
                </tr>
                {% for name, value in types_group_percent %}
                    <tr>
                        <td><b>{{ name }}</b></td>
                        <td>{{ value.0 }}%</td>
                        <td>{{ value.1 }}%</td>
                        <td>{{ value.2 }}%</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    </div>
{% endblock result %}
{#{% block javascripts %}#}
    {#{{ parent() }}#}
{#{% endblock %}#}